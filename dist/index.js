var Ku=Object.create;var wo=Object.defineProperty;var Yu=Object.getOwnPropertyDescriptor;var Xu=Object.getOwnPropertyNames;var Qu=Object.getPrototypeOf,Zu=Object.prototype.hasOwnProperty;var ec=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var tc=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Xu(e))!Zu.call(t,i)&&i!==n&&wo(t,i,{get:()=>e[i],enumerable:!(r=Yu(e,i))||r.enumerable});return t};var nc=(t,e,n)=>(n=t!=null?Ku(Qu(t)):{},tc(e||!t||!t.__esModule?wo(n,"default",{value:t,enumerable:!0}):n,t));var du=ec((io,oo)=>{(function(t,e){typeof io=="object"&&typeof oo<"u"?oo.exports=e():typeof define=="function"&&define.amd?define(e):t.JSON5=e()})(io,(function(){"use strict";function t(a,f){return f={exports:{}},a(f,f.exports),f.exports}var e=t(function(a){var f=a.exports=typeof window<"u"&&window.Math==Math?window:typeof self<"u"&&self.Math==Math?self:Function("return this")();typeof __g=="number"&&(__g=f)}),n=t(function(a){var f=a.exports={version:"2.6.5"};typeof __e=="number"&&(__e=f)}),r=n.version,i=function(a){return typeof a=="object"?a!==null:typeof a=="function"},o=function(a){if(!i(a))throw TypeError(a+" is not an object!");return a},s=function(a){try{return!!a()}catch{return!0}},u=!s(function(){return Object.defineProperty({},"a",{get:function(){return 7}}).a!=7}),c=e.document,l=i(c)&&i(c.createElement),d=function(a){return l?c.createElement(a):{}},h=!u&&!s(function(){return Object.defineProperty(d("div"),"a",{get:function(){return 7}}).a!=7}),p=function(a,f){if(!i(a))return a;var E,C;if(f&&typeof(E=a.toString)=="function"&&!i(C=E.call(a))||typeof(E=a.valueOf)=="function"&&!i(C=E.call(a))||!f&&typeof(E=a.toString)=="function"&&!i(C=E.call(a)))return C;throw TypeError("Can't convert object to primitive value")},D=Object.defineProperty,m=u?Object.defineProperty:function(f,E,C){if(o(f),E=p(E,!0),o(C),h)try{return D(f,E,C)}catch{}if("get"in C||"set"in C)throw TypeError("Accessors not supported!");return"value"in C&&(f[E]=C.value),f},w={f:m},Q=function(a,f){return{enumerable:!(a&1),configurable:!(a&2),writable:!(a&4),value:f}},pe=u?function(a,f,E){return w.f(a,f,Q(1,E))}:function(a,f,E){return a[f]=E,a},yt={}.hasOwnProperty,$e=function(a,f){return yt.call(a,f)},fo=0,Cu=Math.random(),Eu=function(a){return"Symbol(".concat(a===void 0?"":a,")_",(++fo+Cu).toString(36))},yu=!1,wu=t(function(a){var f="__core-js_shared__",E=e[f]||(e[f]={});(a.exports=function(C,y){return E[C]||(E[C]=y!==void 0?y:{})})("versions",[]).push({version:n.version,mode:yu?"pure":"global",copyright:"\xA9 2019 Denis Pushkarev (zloirock.ru)"})}),Or=wu("native-function-to-string",Function.toString),Au=t(function(a){var f=Eu("src"),E="toString",C=(""+Or).split(E);n.inspectSource=function(y){return Or.call(y)},(a.exports=function(y,v,S,te){var O=typeof S=="function";O&&($e(S,"name")||pe(S,"name",v)),y[v]!==S&&(O&&($e(S,f)||pe(S,f,y[v]?""+y[v]:C.join(String(v)))),y===e?y[v]=S:te?y[v]?y[v]=S:pe(y,v,S):(delete y[v],pe(y,v,S)))})(Function.prototype,E,function(){return typeof this=="function"&&this[f]||Or.call(this)})}),xu=function(a){if(typeof a!="function")throw TypeError(a+" is not a function!");return a},po=function(a,f,E){if(xu(a),f===void 0)return a;switch(E){case 1:return function(C){return a.call(f,C)};case 2:return function(C,y){return a.call(f,C,y)};case 3:return function(C,y,v){return a.call(f,C,y,v)}}return function(){return a.apply(f,arguments)}},Vr="prototype",Z=function(a,f,E){var C=a&Z.F,y=a&Z.G,v=a&Z.S,S=a&Z.P,te=a&Z.B,O=y?e:v?e[f]||(e[f]={}):(e[f]||{})[Vr],Xe=y?n:n[f]||(n[f]={}),wt=Xe[Vr]||(Xe[Vr]={}),me,ye,ne,At;y&&(E=f);for(me in E)ye=!C&&O&&O[me]!==void 0,ne=(ye?O:E)[me],At=te&&ye?po(ne,e):S&&typeof ne=="function"?po(Function.call,ne):ne,O&&Au(O,me,ne,a&Z.U),Xe[me]!=ne&&pe(Xe,me,At),S&&wt[me]!=ne&&(wt[me]=ne)};e.core=n,Z.F=1,Z.G=2,Z.S=4,Z.P=8,Z.B=16,Z.W=32,Z.U=64,Z.R=128;var Gt=Z,bu=Math.ceil,Fu=Math.floor,go=function(a){return isNaN(a=+a)?0:(a>0?Fu:bu)(a)},vu=function(a){if(a==null)throw TypeError("Can't call method on  "+a);return a},ku=function(a){return function(f,E){var C=String(vu(f)),y=go(E),v=C.length,S,te;return y<0||y>=v?a?"":void 0:(S=C.charCodeAt(y),S<55296||S>56319||y+1===v||(te=C.charCodeAt(y+1))<56320||te>57343?a?C.charAt(y):S:a?C.slice(y,y+2):(S-55296<<10)+(te-56320)+65536)}},Su=ku(!1);Gt(Gt.P,"String",{codePointAt:function(f){return Su(this,f)}});var Zl=n.String.codePointAt,Bu=Math.max,_u=Math.min,Tu=function(a,f){return a=go(a),a<0?Bu(a+f,0):_u(a,f)},Do=String.fromCharCode,mo=String.fromCodePoint;Gt(Gt.S+Gt.F*(!!mo&&mo.length!=1),"String",{fromCodePoint:function(f){for(var E=arguments,C=[],y=arguments.length,v=0,S;y>v;){if(S=+E[v++],Tu(S,1114111)!==S)throw RangeError(S+" is not a valid code point");C.push(S<65536?Do(S):Do(((S-=65536)>>10)+55296,S%1024+56320))}return C.join("")}});var ed=n.String.fromCodePoint,Iu=/[\u1680\u2000-\u200A\u202F\u205F\u3000]/,Uu=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]/,Lu=/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u08D4-\u08E1\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u09FC\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9-\u0AFF\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C80-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D00-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D54-\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19D9\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1C80-\u1C88\u1CD0-\u1CD2\u1CD4-\u1CF9\u1D00-\u1DF9\u1DFB-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u2E2F\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099\u309A\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C5\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF2D-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE3E\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC00-\uDC4A\uDC50-\uDC59\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDE00-\uDE3E\uDE47\uDE50-\uDE83\uDE86-\uDE99\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC36\uDC38-\uDC40\uDC50-\uDC59\uDC72-\uDC8F\uDC92-\uDCA7\uDCA9-\uDCB6\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD47\uDD50-\uDD59]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6\uDD00-\uDD4A\uDD50-\uDD59]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/,$r={Space_Separator:Iu,ID_Start:Uu,ID_Continue:Lu},N={isSpaceSeparator:function(f){return typeof f=="string"&&$r.Space_Separator.test(f)},isIdStartChar:function(f){return typeof f=="string"&&(f>="a"&&f<="z"||f>="A"&&f<="Z"||f==="$"||f==="_"||$r.ID_Start.test(f))},isIdContinueChar:function(f){return typeof f=="string"&&(f>="a"&&f<="z"||f>="A"&&f<="Z"||f>="0"&&f<="9"||f==="$"||f==="_"||f==="\u200C"||f==="\u200D"||$r.ID_Continue.test(f))},isDigit:function(f){return typeof f=="string"&&/[0-9]/.test(f)},isHexDigit:function(f){return typeof f=="string"&&/[0-9A-Fa-f]/.test(f)}},Rr,ee,Se,In,Re,De,H,jr,Jt,Nu=function(f,E){Rr=String(f),ee="start",Se=[],In=0,Re=1,De=0,H=void 0,jr=void 0,Jt=void 0;do H=Mu(),$u[ee]();while(H.type!=="eof");return typeof E=="function"?Hr({"":Jt},"",E):Jt};function Hr(a,f,E){var C=a[f];if(C!=null&&typeof C=="object")if(Array.isArray(C))for(var y=0;y<C.length;y++){var v=String(y),S=Hr(C,v,E);S===void 0?delete C[v]:Object.defineProperty(C,v,{value:S,writable:!0,enumerable:!0,configurable:!0})}else for(var te in C){var O=Hr(C,te,E);O===void 0?delete C[te]:Object.defineProperty(C,te,{value:O,writable:!0,enumerable:!0,configurable:!0})}return E.call(a,f,C)}var b,A,Wt,Be,k;function Mu(){for(b="default",A="",Wt=!1,Be=1;;){k=_e();var a=Co[b]();if(a)return a}}function _e(){if(Rr[In])return String.fromCodePoint(Rr.codePointAt(In))}function g(){var a=_e();return a===`
`?(Re++,De=0):a?De+=a.length:De++,a&&(In+=a.length),a}var Co={default:function(){switch(k){case"	":case"\v":case"\f":case" ":case"\xA0":case"\uFEFF":case`
`:case"\r":case"\u2028":case"\u2029":g();return;case"/":g(),b="comment";return;case void 0:return g(),U("eof")}if(N.isSpaceSeparator(k)){g();return}return Co[ee]()},comment:function(){switch(k){case"*":g(),b="multiLineComment";return;case"/":g(),b="singleLineComment";return}throw L(g())},multiLineComment:function(){switch(k){case"*":g(),b="multiLineCommentAsterisk";return;case void 0:throw L(g())}g()},multiLineCommentAsterisk:function(){switch(k){case"*":g();return;case"/":g(),b="default";return;case void 0:throw L(g())}g(),b="multiLineComment"},singleLineComment:function(){switch(k){case`
`:case"\r":case"\u2028":case"\u2029":g(),b="default";return;case void 0:return g(),U("eof")}g()},value:function(){switch(k){case"{":case"[":return U("punctuator",g());case"n":return g(),Ke("ull"),U("null",null);case"t":return g(),Ke("rue"),U("boolean",!0);case"f":return g(),Ke("alse"),U("boolean",!1);case"-":case"+":g()==="-"&&(Be=-1),b="sign";return;case".":A=g(),b="decimalPointLeading";return;case"0":A=g(),b="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":A=g(),b="decimalInteger";return;case"I":return g(),Ke("nfinity"),U("numeric",1/0);case"N":return g(),Ke("aN"),U("numeric",NaN);case'"':case"'":Wt=g()==='"',A="",b="string";return}throw L(g())},identifierNameStartEscape:function(){if(k!=="u")throw L(g());g();var f=Pr();switch(f){case"$":case"_":break;default:if(!N.isIdStartChar(f))throw Eo();break}A+=f,b="identifierName"},identifierName:function(){switch(k){case"$":case"_":case"\u200C":case"\u200D":A+=g();return;case"\\":g(),b="identifierNameEscape";return}if(N.isIdContinueChar(k)){A+=g();return}return U("identifier",A)},identifierNameEscape:function(){if(k!=="u")throw L(g());g();var f=Pr();switch(f){case"$":case"_":case"\u200C":case"\u200D":break;default:if(!N.isIdContinueChar(f))throw Eo();break}A+=f,b="identifierName"},sign:function(){switch(k){case".":A=g(),b="decimalPointLeading";return;case"0":A=g(),b="zero";return;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":A=g(),b="decimalInteger";return;case"I":return g(),Ke("nfinity"),U("numeric",Be*(1/0));case"N":return g(),Ke("aN"),U("numeric",NaN)}throw L(g())},zero:function(){switch(k){case".":A+=g(),b="decimalPoint";return;case"e":case"E":A+=g(),b="decimalExponent";return;case"x":case"X":A+=g(),b="hexadecimal";return}return U("numeric",Be*0)},decimalInteger:function(){switch(k){case".":A+=g(),b="decimalPoint";return;case"e":case"E":A+=g(),b="decimalExponent";return}if(N.isDigit(k)){A+=g();return}return U("numeric",Be*Number(A))},decimalPointLeading:function(){if(N.isDigit(k)){A+=g(),b="decimalFraction";return}throw L(g())},decimalPoint:function(){switch(k){case"e":case"E":A+=g(),b="decimalExponent";return}if(N.isDigit(k)){A+=g(),b="decimalFraction";return}return U("numeric",Be*Number(A))},decimalFraction:function(){switch(k){case"e":case"E":A+=g(),b="decimalExponent";return}if(N.isDigit(k)){A+=g();return}return U("numeric",Be*Number(A))},decimalExponent:function(){switch(k){case"+":case"-":A+=g(),b="decimalExponentSign";return}if(N.isDigit(k)){A+=g(),b="decimalExponentInteger";return}throw L(g())},decimalExponentSign:function(){if(N.isDigit(k)){A+=g(),b="decimalExponentInteger";return}throw L(g())},decimalExponentInteger:function(){if(N.isDigit(k)){A+=g();return}return U("numeric",Be*Number(A))},hexadecimal:function(){if(N.isHexDigit(k)){A+=g(),b="hexadecimalInteger";return}throw L(g())},hexadecimalInteger:function(){if(N.isHexDigit(k)){A+=g();return}return U("numeric",Be*Number(A))},string:function(){switch(k){case"\\":g(),A+=Ou();return;case'"':if(Wt)return g(),U("string",A);A+=g();return;case"'":if(!Wt)return g(),U("string",A);A+=g();return;case`
`:case"\r":throw L(g());case"\u2028":case"\u2029":Ru(k);break;case void 0:throw L(g())}A+=g()},start:function(){switch(k){case"{":case"[":return U("punctuator",g())}b="value"},beforePropertyName:function(){switch(k){case"$":case"_":A=g(),b="identifierName";return;case"\\":g(),b="identifierNameStartEscape";return;case"}":return U("punctuator",g());case'"':case"'":Wt=g()==='"',b="string";return}if(N.isIdStartChar(k)){A+=g(),b="identifierName";return}throw L(g())},afterPropertyName:function(){if(k===":")return U("punctuator",g());throw L(g())},beforePropertyValue:function(){b="value"},afterPropertyValue:function(){switch(k){case",":case"}":return U("punctuator",g())}throw L(g())},beforeArrayValue:function(){if(k==="]")return U("punctuator",g());b="value"},afterArrayValue:function(){switch(k){case",":case"]":return U("punctuator",g())}throw L(g())},end:function(){throw L(g())}};function U(a,f){return{type:a,value:f,line:Re,column:De}}function Ke(a){for(var f=0,E=a;f<E.length;f+=1){var C=E[f],y=_e();if(y!==C)throw L(g());g()}}function Ou(){var a=_e();switch(a){case"b":return g(),"\b";case"f":return g(),"\f";case"n":return g(),`
`;case"r":return g(),"\r";case"t":return g(),"	";case"v":return g(),"\v";case"0":if(g(),N.isDigit(_e()))throw L(g());return"\0";case"x":return g(),Vu();case"u":return g(),Pr();case`
`:case"\u2028":case"\u2029":return g(),"";case"\r":return g(),_e()===`
`&&g(),"";case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":throw L(g());case void 0:throw L(g())}return g()}function Vu(){var a="",f=_e();if(!N.isHexDigit(f)||(a+=g(),f=_e(),!N.isHexDigit(f)))throw L(g());return a+=g(),String.fromCodePoint(parseInt(a,16))}function Pr(){for(var a="",f=4;f-- >0;){var E=_e();if(!N.isHexDigit(E))throw L(g());a+=g()}return String.fromCodePoint(parseInt(a,16))}var $u={start:function(){if(H.type==="eof")throw Ye();qr()},beforePropertyName:function(){switch(H.type){case"identifier":case"string":jr=H.value,ee="afterPropertyName";return;case"punctuator":Un();return;case"eof":throw Ye()}},afterPropertyName:function(){if(H.type==="eof")throw Ye();ee="beforePropertyValue"},beforePropertyValue:function(){if(H.type==="eof")throw Ye();qr()},beforeArrayValue:function(){if(H.type==="eof")throw Ye();if(H.type==="punctuator"&&H.value==="]"){Un();return}qr()},afterPropertyValue:function(){if(H.type==="eof")throw Ye();switch(H.value){case",":ee="beforePropertyName";return;case"}":Un()}},afterArrayValue:function(){if(H.type==="eof")throw Ye();switch(H.value){case",":ee="beforeArrayValue";return;case"]":Un()}},end:function(){}};function qr(){var a;switch(H.type){case"punctuator":switch(H.value){case"{":a={};break;case"[":a=[];break}break;case"null":case"boolean":case"numeric":case"string":a=H.value;break}if(Jt===void 0)Jt=a;else{var f=Se[Se.length-1];Array.isArray(f)?f.push(a):Object.defineProperty(f,jr,{value:a,writable:!0,enumerable:!0,configurable:!0})}if(a!==null&&typeof a=="object")Se.push(a),Array.isArray(a)?ee="beforeArrayValue":ee="beforePropertyName";else{var E=Se[Se.length-1];E==null?ee="end":Array.isArray(E)?ee="afterArrayValue":ee="afterPropertyValue"}}function Un(){Se.pop();var a=Se[Se.length-1];a==null?ee="end":Array.isArray(a)?ee="afterArrayValue":ee="afterPropertyValue"}function L(a){return Ln(a===void 0?"JSON5: invalid end of input at "+Re+":"+De:"JSON5: invalid character '"+yo(a)+"' at "+Re+":"+De)}function Ye(){return Ln("JSON5: invalid end of input at "+Re+":"+De)}function Eo(){return De-=5,Ln("JSON5: invalid identifier character at "+Re+":"+De)}function Ru(a){console.warn("JSON5: '"+yo(a)+"' in strings is not valid ECMAScript; consider escaping")}function yo(a){var f={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"};if(f[a])return f[a];if(a<" "){var E=a.charCodeAt(0).toString(16);return"\\x"+("00"+E).substring(E.length)}return a}function Ln(a){var f=new SyntaxError(a);return f.lineNumber=Re,f.columnNumber=De,f}var ju=function(f,E,C){var y=[],v="",S,te,O="",Xe;if(E!=null&&typeof E=="object"&&!Array.isArray(E)&&(C=E.space,Xe=E.quote,E=E.replacer),typeof E=="function")te=E;else if(Array.isArray(E)){S=[];for(var wt=0,me=E;wt<me.length;wt+=1){var ye=me[wt],ne=void 0;typeof ye=="string"?ne=ye:(typeof ye=="number"||ye instanceof String||ye instanceof Number)&&(ne=String(ye)),ne!==void 0&&S.indexOf(ne)<0&&S.push(ne)}}return C instanceof Number?C=Number(C):C instanceof String&&(C=String(C)),typeof C=="number"?C>0&&(C=Math.min(10,Math.floor(C)),O="          ".substr(0,C)):typeof C=="string"&&(O=C.substr(0,10)),At("",{"":f});function At(T,W){var x=W[T];switch(x!=null&&(typeof x.toJSON5=="function"?x=x.toJSON5(T):typeof x.toJSON=="function"&&(x=x.toJSON(T))),te&&(x=te.call(W,T,x)),x instanceof Number?x=Number(x):x instanceof String?x=String(x):x instanceof Boolean&&(x=x.valueOf()),x){case null:return"null";case!0:return"true";case!1:return"false"}if(typeof x=="string")return Nn(x,!1);if(typeof x=="number")return String(x);if(typeof x=="object")return Array.isArray(x)?Ju(x):zu(x)}function Nn(T){for(var W={"'":.1,'"':.2},x={"'":"\\'",'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t","\v":"\\v","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},G="",Ce=0;Ce<T.length;Ce++){var K=T[Ce];switch(K){case"'":case'"':W[K]++,G+=K;continue;case"\0":if(N.isDigit(T[Ce+1])){G+="\\x00";continue}}if(x[K]){G+=x[K];continue}if(K<" "){var Qe=K.charCodeAt(0).toString(16);G+="\\x"+("00"+Qe).substring(Qe.length);continue}G+=K}var Te=Xe||Object.keys(W).reduce(function(je,Ze){return W[je]<W[Ze]?je:Ze});return G=G.replace(new RegExp(Te,"g"),x[Te]),Te+G+Te}function zu(T){if(y.indexOf(T)>=0)throw TypeError("Converting circular structure to JSON5");y.push(T);var W=v;v=v+O;for(var x=S||Object.keys(T),G=[],Ce=0,K=x;Ce<K.length;Ce+=1){var Qe=K[Ce],Te=At(Qe,T);if(Te!==void 0){var je=Gu(Qe)+":";O!==""&&(je+=" "),je+=Te,G.push(je)}}var Ze;if(G.length===0)Ze="{}";else{var Mn;if(O==="")Mn=G.join(","),Ze="{"+Mn+"}";else{var Wu=`,
`+v;Mn=G.join(Wu),Ze=`{
`+v+Mn+`,
`+W+"}"}}return y.pop(),v=W,Ze}function Gu(T){if(T.length===0)return Nn(T,!0);var W=String.fromCodePoint(T.codePointAt(0));if(!N.isIdStartChar(W))return Nn(T,!0);for(var x=W.length;x<T.length;x++)if(!N.isIdContinueChar(String.fromCodePoint(T.codePointAt(x))))return Nn(T,!0);return T}function Ju(T){if(y.indexOf(T)>=0)throw TypeError("Converting circular structure to JSON5");y.push(T);var W=v;v=v+O;for(var x=[],G=0;G<T.length;G++){var Ce=At(String(G),T);x.push(Ce!==void 0?Ce:"null")}var K;if(x.length===0)K="[]";else if(O===""){var Qe=x.join(",");K="["+Qe+"]"}else{var Te=`,
`+v,je=x.join(Te);K=`[
`+v+je+`,
`+W+"]"}return y.pop(),v=W,K}},Hu={parse:Nu,stringify:ju},Pu=Hu,qu=Pu;return qu}))});function rc(t){let e=t.dataset.w||200,n=t.dataset.h||200;function r(D=!1){t.style.minWidth=`${D?0:e}px`,t.style.minHeight=`${D?0:n}px`}r();let i=t.querySelector(".panel-header"),o=t.querySelector(".panel-toggle-btn");if(!i||!o){console.error("Panel header or toggle button not found");return}let s=()=>{document.querySelectorAll(".panel").forEach(D=>{D!==t&&(D.style.zIndex="100")}),t.style.zIndex="101"};t.addEventListener("mousedown",s,!0);let u=!1,c,l,d=D=>{D.target.closest("button")||(u=!0,c=D.clientX-t.offsetLeft,l=D.clientY-t.offsetTop,document.addEventListener("mousemove",h),document.addEventListener("mouseup",p))},h=D=>{if(!u)return;let m=D.clientX-c,w=D.clientY-l,Q=window.innerWidth-t.offsetWidth,pe=window.innerHeight-t.offsetHeight;m=Math.max(0,Math.min(m,Q)),w=Math.max(0,Math.min(w,pe)),t.style.left=`${m}px`,t.style.top=`${w}px`},p=()=>{u=!1,document.removeEventListener("mousemove",h),document.removeEventListener("mouseup",p)};i.addEventListener("mousedown",d),o.addEventListener("click",D=>{D.stopPropagation(),t.classList.toggle("collapsed"),t.classList.contains("collapsed")?(r(!0),o.textContent="+"):(r(),o.textContent="-")})}function Ao(){document.querySelectorAll(".panel").forEach(rc)}var zr=class{_events={};on(e,n){let r=e;this._events[r]||(this._events[r]=[]),this._events[r].push(n)}once(e,n){let r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){let r=e;this._events[r]&&(this._events[r]=this._events[r].filter(i=>i!==n))}emit(e,...n){let r=this._events[e];r&&r.length>0&&r.forEach(i=>{i(...n)})}listenerCount(e){return this._events[e]?.length||0}},xt=zr;var On=class{ws;ackIdCounter;ackCallbacks;handlers=new xt;opts;url;connected=!1;_manuallyDisconnected=!1;messageQueue=[];constructor(e,n={}){this.ackIdCounter=1,this.ackCallbacks=new Map,this.opts={logs:!1,reConnect:!0,reConnectInterval:1e3,token:null,autoConnect:!0,...n},this.url=new URL(e,typeof window<"u"?window.location.href.replace("http","ws"):"ws://localhost"),this.opts.token&&this.url.searchParams.set("token",this.opts.token),this.opts.autoConnect&&this.connect()}connect(){this._manuallyDisconnected=!1;let e=Date.now().toString(36)+Math.random().toString(36).substring(2,10);this.url.searchParams.set("id",e),this.opts.connectionData&&this.url.searchParams.set("data",JSON.stringify(this.opts.connectionData)),this.ws=new WebSocket(this.url.href),this.ws.onopen=()=>{this.connected=!0,this.opts.logs&&console.log("[ws] Connected");let n;for(;n=this.messageQueue.shift();)this.ws.send(n);this._handlersEmit("connect")},this.ws.onerror=(...n)=>{this.opts.logs&&console.warn("[ws] Error:",n),this._handlersEmit("error",...n)},this.ws.onmessage=n=>{let r=n?.data?.toString()||n?.toString()||"",i;try{i=JSON.parse(r)}catch{this.opts.logs&&console.warn("[ws] Invalid JSON:",r);return}if("ack"in i){let c=i.ack,l=this.ackCallbacks.get(c);l&&(this.ackCallbacks.delete(c),l(...i.data));return}let{evt:o,data:s,ackI:u}=i;if(!(!o||s&&!Array.isArray(s))){if(Array.isArray(u))for(let c=0;c<u.length;c++){let l=u[c];if(!s[l])break;let d=s[l];s[l]=(...h)=>{this.ws.send(JSON.stringify({ack:d,data:h}))}}this._handlersEmit(o,...s)}},this.ws.onclose=async n=>{if(this.connected=!1,this.opts.logs&&console.log("[ws] Disconnected",n),this._handlersEmit("disconnect",n),this._manuallyDisconnected){this._manuallyDisconnected=!1;return}if(n.code===1006){this.opts.logs&&console.log("[ws] Connection closed by server");let r=new URLSearchParams;r.set("id",e),r.set("path",this.url.pathname);let i=this.url.origin+"/gloves-link/status?"+r.toString(),o=await fetch(i.replace("ws","http"));if(!o.ok)return console.error("[ws] Status error",o.status);let s=await o.json();if(s.err){this.opts.logs&&console.log("[ws] Status error",s.msg);return}let u=s.status;this.opts.logs&&console.log("[ws] Status",u),u.status===401?this._handlersEmit("connect_unauthorized",u.msg):u.status===403?this._handlersEmit("connect_forbidden",u.msg):u.status===500&&this._handlersEmit("connect_serverError",u.msg);return}this.opts.reConnect&&setTimeout(()=>{this.connect()},this.opts.reConnectInterval)}}on(e,n){this.handlers.on(e,n)}once(e,n){this.handlers.once(e,n)}emit(e,...n){let r=n.map((o,s)=>{if(typeof o=="function")return s}).filter(o=>o!==void 0);for(let o=0;o<r.length;o++){let s=r[o],u=this.ackIdCounter++;this.ackCallbacks.set(u,n[s]),n[s]=u}let i=JSON.stringify({evt:e,data:n||void 0,ackI:r.length?r:void 0});this.connected&&this.ws?.readyState===WebSocket.OPEN?this.ws.send(i):this.messageQueue.push(i)}send(e,...n){return this.emit(e,...n)}disconnect(){this._manuallyDisconnected=!0,this.ws.close()}close(){this.ws.close()}_handlersEmit(e,...n){this.handlers.emit(e,...n),this.handlers.emit("*",e,...n)}};var re=()=>new Map,Vn=t=>{let e=re();return t.forEach((n,r)=>{e.set(r,n)}),e},we=(t,e,n)=>{let r=t.get(e);return r===void 0&&t.set(e,r=n()),r},xo=(t,e)=>{let n=[];for(let[r,i]of t)n.push(e(i,r));return n},bo=(t,e)=>{for(let[n,r]of t)if(e(r,n))return!0;return!1};var Ie=()=>new Set;var $n=t=>t[t.length-1];var Fo=(t,e)=>{for(let n=0;n<e.length;n++)t.push(e[n])},Ue=Array.from,Rn=(t,e)=>{for(let n=0;n<t.length;n++)if(!e(t[n],n,t))return!1;return!0},jn=(t,e)=>{for(let n=0;n<t.length;n++)if(e(t[n],n,t))return!0;return!1};var vo=(t,e)=>{let n=new Array(t);for(let r=0;r<t;r++)n[r]=e(r,n);return n};var et=Array.isArray;var Hn=class{constructor(){this._observers=re()}on(e,n){return we(this._observers,e,Ie).add(n),n}once(e,n){let r=(...i)=>{this.off(e,r),n(...i)};this.on(e,r)}off(e,n){let r=this._observers.get(e);r!==void 0&&(r.delete(n),r.size===0&&this._observers.delete(e))}emit(e,n){return Ue((this._observers.get(e)||re()).values()).forEach(r=>r(...n))}destroy(){this._observers=re()}};var ie=Math.floor;var tt=Math.abs;var Pn=(t,e)=>t<e?t:e,Le=(t,e)=>t>e?t:e,ud=Number.isNaN;var qn=t=>t!==0?t<0:1/t<0;var bt=Number.MAX_SAFE_INTEGER,Jr=Number.MIN_SAFE_INTEGER,cd=1<<31;var ko=Number.isInteger||(t=>typeof t=="number"&&isFinite(t)&&ie(t)===t),ad=Number.isNaN,ld=Number.parseInt;var Kr=String.fromCharCode,ic=String.fromCodePoint,dd=Kr(65535),oc=t=>t.toLowerCase(),sc=/^\s*/g,uc=t=>t.replace(sc,""),cc=/([A-Z])/g,Yr=(t,e)=>uc(t.replace(cc,n=>`${e}${oc(n)}`));var ac=t=>{let e=unescape(encodeURIComponent(t)),n=e.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=e.codePointAt(i);return r},vt=typeof TextEncoder<"u"?new TextEncoder:null,lc=t=>vt.encode(t),So=vt?lc:ac;var Ft=typeof TextDecoder>"u"?null:new TextDecoder("utf-8",{fatal:!0,ignoreBOM:!0});Ft&&Ft.decode(new Uint8Array).length===1&&(Ft=null);var Bo=(t,e)=>vo(e,()=>t).join("");var nt=class{constructor(){this.cpos=0,this.cbuf=new Uint8Array(100),this.bufs=[]}},Zt=()=>new nt;var dc=t=>{let e=t.cpos;for(let n=0;n<t.bufs.length;n++)e+=t.bufs[n].length;return e};var Ee=t=>{let e=new Uint8Array(dc(t)),n=0;for(let r=0;r<t.bufs.length;r++){let i=t.bufs[r];e.set(i,n),n+=i.length}return e.set(new Uint8Array(t.cbuf.buffer,0,t.cpos),n),e},hc=(t,e)=>{let n=t.cbuf.length;n-t.cpos<e&&(t.bufs.push(new Uint8Array(t.cbuf.buffer,0,t.cpos)),t.cbuf=new Uint8Array(Le(n,e)*2),t.cpos=0)},P=(t,e)=>{let n=t.cbuf.length;t.cpos===n&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(n*2),t.cpos=0),t.cbuf[t.cpos++]=e};var Jn=P;var _=(t,e)=>{for(;e>127;)P(t,128|127&e),e=ie(e/128);P(t,127&e)},Wn=(t,e)=>{let n=qn(e);for(n&&(e=-e),P(t,(e>63?128:0)|(n?64:0)|63&e),e=ie(e/64);e>0;)P(t,(e>127?128:0)|127&e),e=ie(e/128)},Xr=new Uint8Array(3e4),fc=Xr.length/3,pc=(t,e)=>{if(e.length<fc){let n=vt.encodeInto(e,Xr).written||0;_(t,n);for(let r=0;r<n;r++)P(t,Xr[r])}else se(t,So(e))},gc=(t,e)=>{let n=unescape(encodeURIComponent(e)),r=n.length;_(t,r);for(let i=0;i<r;i++)P(t,n.codePointAt(i))},rt=vt&&vt.encodeInto?pc:gc;var en=(t,e)=>{let n=t.cbuf.length,r=t.cpos,i=Pn(n-r,e.length),o=e.length-i;t.cbuf.set(e.subarray(0,i),r),t.cpos+=i,o>0&&(t.bufs.push(t.cbuf),t.cbuf=new Uint8Array(Le(n*2,o)),t.cbuf.set(e.subarray(i)),t.cpos=o)},se=(t,e)=>{_(t,e.byteLength),en(t,e)},Qr=(t,e)=>{hc(t,e);let n=new DataView(t.cbuf.buffer,t.cpos,e);return t.cpos+=e,n},Dc=(t,e)=>Qr(t,4).setFloat32(0,e,!1),mc=(t,e)=>Qr(t,8).setFloat64(0,e,!1),Cc=(t,e)=>Qr(t,8).setBigInt64(0,e,!1);var To=new DataView(new ArrayBuffer(4)),Ec=t=>(To.setFloat32(0,t),To.getFloat32(0)===t),St=(t,e)=>{switch(typeof e){case"string":P(t,119),rt(t,e);break;case"number":ko(e)&&tt(e)<=2147483647?(P(t,125),Wn(t,e)):Ec(e)?(P(t,124),Dc(t,e)):(P(t,123),mc(t,e));break;case"bigint":P(t,122),Cc(t,e);break;case"object":if(e===null)P(t,126);else if(et(e)){P(t,117),_(t,e.length);for(let n=0;n<e.length;n++)St(t,e[n])}else if(e instanceof Uint8Array)P(t,116),se(t,e);else{P(t,118);let n=Object.keys(e);_(t,n.length);for(let r=0;r<n.length;r++){let i=n[r];rt(t,i),St(t,e[i])}}break;case"boolean":P(t,e?120:121);break;default:P(t,127)}},Qt=class extends nt{constructor(e){super(),this.w=e,this.s=null,this.count=0}write(e){this.s===e?this.count++:(this.count>0&&_(this,this.count-1),this.count=1,this.w(this,e),this.s=e)}};var Io=t=>{t.count>0&&(Wn(t.encoder,t.count===1?t.s:-t.s),t.count>1&&_(t.encoder,t.count-2))},it=class{constructor(){this.encoder=new nt,this.s=0,this.count=0}write(e){this.s===e?this.count++:(Io(this),this.count=1,this.s=e)}toUint8Array(){return Io(this),Ee(this.encoder)}};var Uo=t=>{if(t.count>0){let e=t.diff*2+(t.count===1?0:1);Wn(t.encoder,e),t.count>1&&_(t.encoder,t.count-2)}},Bt=class{constructor(){this.encoder=new nt,this.s=0,this.count=0,this.diff=0}write(e){this.diff===e-this.s?(this.s=e,this.count++):(Uo(this),this.count=1,this.diff=e-this.s,this.s=e)}toUint8Array(){return Uo(this),Ee(this.encoder)}},Gn=class{constructor(){this.sarr=[],this.s="",this.lensE=new it}write(e){this.s+=e,this.s.length>19&&(this.sarr.push(this.s),this.s=""),this.lensE.write(e.length)}toUint8Array(){let e=new nt;return this.sarr.push(this.s),this.s="",rt(e,this.sarr.join("")),en(e,this.lensE.toUint8Array()),Ee(e)}};var de=t=>new Error(t),he=()=>{throw de("Method unimplemented")},ue=()=>{throw de("Unexpected case")};var Lo=de("Unexpected end of array"),No=de("Integer out of Range"),_t=class{constructor(e){this.arr=e,this.pos=0}},ct=t=>new _t(t),Mo=t=>t.pos!==t.arr.length;var wc=(t,e)=>{let n=new Uint8Array(t.arr.buffer,t.pos+t.arr.byteOffset,e);return t.pos+=e,n},ce=t=>wc(t,F(t));var ot=t=>t.arr[t.pos++];var F=t=>{let e=0,n=1,r=t.arr.length;for(;t.pos<r;){let i=t.arr[t.pos++];if(e=e+(i&127)*n,n*=128,i<128)return e;if(e>bt)throw No}throw Lo},Yn=t=>{let e=t.arr[t.pos++],n=e&63,r=64,i=(e&64)>0?-1:1;if((e&128)===0)return i*n;let o=t.arr.length;for(;t.pos<o;){if(e=t.arr[t.pos++],n=n+(e&127)*r,r*=128,e<128)return i*n;if(n>bt)throw No}throw Lo};var Ac=t=>{let e=F(t);if(e===0)return"";{let n=String.fromCodePoint(ot(t));if(--e<100)for(;e--;)n+=String.fromCodePoint(ot(t));else for(;e>0;){let r=e<1e4?e:1e4,i=t.arr.subarray(t.pos,t.pos+r);t.pos+=r,n+=String.fromCodePoint.apply(null,i),e-=r}return decodeURIComponent(escape(n))}},xc=t=>Ft.decode(ce(t)),st=Ft?xc:Ac;var ei=(t,e)=>{let n=new DataView(t.arr.buffer,t.arr.byteOffset+t.pos,e);return t.pos+=e,n},bc=t=>ei(t,4).getFloat32(0,!1),Fc=t=>ei(t,8).getFloat64(0,!1),vc=t=>ei(t,8).getBigInt64(0,!1);var kc=[t=>{},t=>null,Yn,bc,Fc,vc,t=>!1,t=>!0,st,t=>{let e=F(t),n={};for(let r=0;r<e;r++){let i=st(t);n[i]=Tt(t)}return n},t=>{let e=F(t),n=[];for(let r=0;r<e;r++)n.push(Tt(t));return n},ce],Tt=t=>kc[127-ot(t)](t),tn=class extends _t{constructor(e,n){super(e),this.reader=n,this.s=null,this.count=0}read(){return this.count===0&&(this.s=this.reader(this),Mo(this)?this.count=F(this)+1:this.count=-1),this.count--,this.s}};var ut=class extends _t{constructor(e){super(e),this.s=0,this.count=0}read(){if(this.count===0){this.s=Yn(this);let e=qn(this.s);this.count=1,e&&(this.s=-this.s,this.count=F(this)+2)}return this.count--,this.s}};var It=class extends _t{constructor(e){super(e),this.s=0,this.count=0,this.diff=0}read(){if(this.count===0){let e=Yn(this),n=e&1;this.diff=ie(e/2),this.count=1,n&&(this.count=F(this)+2)}return this.s+=this.diff,this.count--,this.s}},Kn=class{constructor(e){this.decoder=new ut(e),this.str=st(this.decoder),this.spos=0}read(){let e=this.spos+this.decoder.read(),n=this.str.slice(this.spos,e);return this.spos=e,n}};var pd=crypto.subtle,Oo=crypto.getRandomValues.bind(crypto);var ti=()=>Oo(new Uint32Array(1))[0];var Bc="10000000-1000-4000-8000"+-1e11,Vo=()=>Bc.replace(/[018]/g,t=>(t^ti()&15>>t/4).toString(16));var $o=Date.now;var ni=t=>new Promise(t);var md=Promise.all.bind(Promise);var ri=t=>t===void 0?null:t;var ii=class{constructor(){this.map=new Map}setItem(e,n){this.map.set(e,n)}getItem(e){return this.map.get(e)}},Ro=new ii,Lc=!0;try{typeof localStorage<"u"&&localStorage&&(Ro=localStorage,Lc=!1)}catch{}var jo=Ro;var at=Symbol("Equality"),Xn=(t,e)=>t===e||!!t?.[at]?.(e)||!1;var Ho=t=>typeof t=="object",Po=Object.assign,Mc=Object.keys;var qo=(t,e)=>{for(let n in t)e(t[n],n)};var nn=t=>Mc(t).length;var zo=t=>{for(let e in t)return!1;return!0},Ut=(t,e)=>{for(let n in t)if(!e(t[n],n))return!1;return!0},rn=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),si=(t,e)=>t===e||nn(t)===nn(e)&&Ut(t,(n,r)=>(n!==void 0||rn(e,r))&&Xn(e[r],n)),Oc=Object.freeze,ui=t=>{for(let e in t){let n=t[e];(typeof n=="object"||typeof n=="function")&&ui(t[e])}return Oc(t)};var sn=(t,e,n=0)=>{try{for(;n<t.length;n++)t[n](...e)}finally{n<t.length&&sn(t,e,n+1)}};var Go=t=>t;var on=(t,e)=>{if(t===e)return!0;if(t==null||e==null||t.constructor!==e.constructor&&(t.constructor||Object)!==(e.constructor||Object))return!1;if(t[at]!=null)return t[at](e);switch(t.constructor){case ArrayBuffer:t=new Uint8Array(t),e=new Uint8Array(e);case Uint8Array:{if(t.byteLength!==e.byteLength)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;break}case Set:{if(t.size!==e.size)return!1;for(let n of t)if(!e.has(n))return!1;break}case Map:{if(t.size!==e.size)return!1;for(let n of t.keys())if(!e.has(n)||!on(t.get(n),e.get(n)))return!1;break}case void 0:case Object:if(nn(t)!==nn(e))return!1;for(let n in t)if(!rn(t,n)||!on(t[n],e[n]))return!1;break;case Array:if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(!on(t[n],e[n]))return!1;break;default:return!1}return!0},Jo=(t,e)=>e.includes(t);var un=typeof process<"u"&&process.release&&/node|io\.js/.test(process.release.name)&&Object.prototype.toString.call(typeof process<"u"?process:0)==="[object process]";var Cd=typeof navigator<"u"?/Mac/.test(navigator.platform):!1,Ae,Vc=[],$c=()=>{if(Ae===void 0)if(un){Ae=re();let t=process.argv,e=null;for(let n=0;n<t.length;n++){let r=t[n];r[0]==="-"?(e!==null&&Ae.set(e,""),e=r):e!==null?(Ae.set(e,r),e=null):Vc.push(r)}e!==null&&Ae.set(e,"")}else typeof location=="object"?(Ae=re(),(location.search||"?").slice(1).split("&").forEach(t=>{if(t.length!==0){let[e,n]=t.split("=");Ae.set(`--${Yr(e,"-")}`,n),Ae.set(`-${Yr(e,"-")}`,n)}})):Ae=re();return Ae},li=t=>$c().has(t);var cn=t=>un?ri(process.env[t.toUpperCase().replaceAll("-","_")]):ri(jo.getItem(t));var Wo=t=>li("--"+t)||cn(t)!==null,Ko=Wo("production"),Rc=un&&Jo(process.env.FORCE_COLOR,["true","1","2"]),Yo=Rc||!li("--no-colors")&&!Wo("no-color")&&(!un||process.stdout.isTTY)&&(!un||li("--color")||cn("COLORTERM")!==null||(cn("TERM")||"").includes("color"));var jc=t=>new Uint8Array(t);var Xo=t=>{let e=jc(t.byteLength);return e.set(t),e};var hi=class{constructor(e,n){this.left=e,this.right=n}},xe=(t,e)=>new hi(t,e);var fi=t=>t.next()>=.5,Qn=(t,e,n)=>ie(t.next()*(n+1-e)+e);var pi=(t,e,n)=>ie(t.next()*(n+1-e)+e);var gi=(t,e,n)=>pi(t,e,n);var qc=t=>Kr(gi(t,97,122)),Qo=(t,e=0,n=20)=>{let r=gi(t,e,n),i="";for(let o=0;o<r;o++)i+=qc(t);return i};var Zn=(t,e)=>e[gi(t,0,e.length-1)];var Gc=Symbol("0schema"),Di=class{constructor(){this._rerrs=[]}extend(e,n,r,i=null){this._rerrs.push({path:e,expected:n,has:r,message:i})}toString(){let e=[];for(let n=this._rerrs.length-1;n>0;n--){let r=this._rerrs[n];e.push(Bo(" ",(this._rerrs.length-n)*2)+`${r.path!=null?`[${r.path}] `:""}${r.has} doesn't match ${r.expected}. ${r.message}`)}return e.join(`
`)}},mi=(t,e)=>t===e?!0:t==null||e==null||t.constructor!==e.constructor?!1:t[at]?Xn(t,e):et(t)?Rn(t,n=>jn(e,r=>mi(n,r))):Ho(t)?Ut(t,(n,r)=>mi(n,e[r])):!1,J=class{static _dilutes=!1;extends(e){let[n,r]=[this.shape,e.shape];return this.constructor._dilutes&&([r,n]=[n,r]),mi(n,r)}equals(e){return this.constructor===e.constructor&&on(this.shape,e.shape)}[Gc](){return!0}[at](e){return this.equals(e)}validate(e){return this.check(e)}check(e,n){he()}get nullable(){return Vt(this,dr)}get optional(){return new er(this)}cast(e){return Zo(e,this),e}expect(e){return Zo(e,this),e}},an=class extends J{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n=void 0){let r=e?.constructor===this.shape&&(this._c==null||this._c(e));return!r&&n?.extend(null,this.shape.name,e?.constructor.name,e?.constructor!==this.shape?"Constructor match failed":"Check failed"),r}},M=(t,e=null)=>new an(t,e),yd=M(an),ln=class extends J{constructor(e){super(),this.shape=e}check(e,n){let r=this.shape(e);return!r&&n?.extend(null,"custom prop",e?.constructor.name,"failed to check custom prop"),r}},V=t=>new ln(t),wd=M(ln),Mt=class extends J{constructor(e){super(),this.shape=e}check(e,n){let r=this.shape.some(i=>i===e);return!r&&n?.extend(null,this.shape.join(" | "),e.toString()),r}},ar=(...t)=>new Mt(t),es=M(Mt),Jc=RegExp.escape||(t=>t.replace(/[().|&,$^[\]]/g,e=>"\\"+e)),ts=t=>{if(Ot.check(t))return[Jc(t)];if(es.check(t))return t.shape.map(e=>e+"");if(ss.check(t))return["[+-]?\\d+.?\\d*"];if(us.check(t))return[".*"];if(ur.check(t))return t.shape.map(ts).flat(1);ue()},Ci=class extends J{constructor(e){super(),this.shape=e,this._r=new RegExp("^"+e.map(ts).map(n=>`(${n.join("|")})`).join("")+"$")}check(e,n){let r=this._r.exec(e)!=null;return!r&&n?.extend(null,this._r.toString(),e.toString(),"String doesn't match string template."),r}};var Ad=M(Ci),Wc=Symbol("optional"),er=class extends J{constructor(e){super(),this.shape=e}check(e,n){let r=e===void 0||this.shape.check(e);return!r&&n?.extend(null,"undefined (optional)","()"),r}get[Wc](){return!0}},Kc=M(er),tr=class extends J{check(e,n){return n?.extend(null,"never",typeof e),!1}},xd=new tr,bd=M(tr),nr=class t extends J{constructor(e,n=!1){super(),this.shape=e,this._isPartial=n}static _dilutes=!0;get partial(){return new t(this.shape,!0)}check(e,n){return e==null?(n?.extend(null,"object","null"),!1):Ut(this.shape,(r,i)=>{let o=this._isPartial&&!rn(e,i)||r.check(e[i],n);return!o&&n?.extend(i.toString(),r.toString(),typeof e[i],"Object property does not match"),o})}},Yc=t=>new nr(t),Xc=M(nr),Qc=V(t=>t!=null&&(t.constructor===Object||t.constructor==null)),rr=class extends J{constructor(e,n){super(),this.shape={keys:e,values:n}}check(e,n){return e!=null&&Ut(e,(r,i)=>{let o=this.shape.keys.check(i,n);return!o&&n?.extend(i+"","Record",typeof e,o?"Key doesn't match schema":"Value doesn't match value"),o&&this.shape.values.check(r,n)})}},ns=(t,e)=>new rr(t,e),Zc=M(rr),ir=class extends J{constructor(e){super(),this.shape=e}check(e,n){return e!=null&&Ut(this.shape,(r,i)=>{let o=r.check(e[i],n);return!o&&n?.extend(i.toString(),"Tuple",typeof r),o})}},ea=(...t)=>new ir(t),Fd=M(ir),or=class extends J{constructor(e){super(),this.shape=e.length===1?e[0]:new dn(e)}check(e,n){let r=et(e)&&Rn(e,i=>this.shape.check(i));return!r&&n?.extend(null,"Array",""),r}},rs=(...t)=>new or(t),ta=M(or),na=V(t=>et(t)),sr=class extends J{constructor(e,n){super(),this.shape=e,this._c=n}check(e,n){let r=e instanceof this.shape&&(this._c==null||this._c(e));return!r&&n?.extend(null,this.shape.name,e?.constructor.name),r}},ra=(t,e=null)=>new sr(t,e),vd=M(sr),ia=ra(J),Ei=class extends J{constructor(e){super(),this.len=e.length-1,this.args=ea(...e.slice(-1)),this.res=e[this.len]}check(e,n){let r=e.constructor===Function&&e.length<=this.len;return!r&&n?.extend(null,"function",typeof e),r}};var oa=M(Ei),sa=V(t=>typeof t=="function"),yi=class extends J{constructor(e){super(),this.shape=e}check(e,n){let r=Rn(this.shape,i=>i.check(e,n));return!r&&n?.extend(null,"Intersectinon",typeof e),r}};var kd=M(yi,t=>t.shape.length>0),dn=class extends J{static _dilutes=!0;constructor(e){super(),this.shape=e}check(e,n){let r=jn(this.shape,i=>i.check(e,n));return n?.extend(null,"Union",typeof e),r}},Vt=(...t)=>t.findIndex(e=>ur.check(e))>=0?Vt(...t.map(e=>hn(e)).map(e=>ur.check(e)?e.shape:[e]).flat(1)):t.length===1?t[0]:new dn(t),ur=M(dn),is=()=>!0,cr=V(is),ua=M(ln,t=>t.shape===is),Ai=V(t=>typeof t=="bigint"),ca=V(t=>t===Ai),os=V(t=>typeof t=="symbol"),Sd=V(t=>t===os),Nt=V(t=>typeof t=="number"),ss=V(t=>t===Nt),Ot=V(t=>typeof t=="string"),us=V(t=>t===Ot),lr=V(t=>typeof t=="boolean"),aa=V(t=>t===lr),cs=ar(void 0),Bd=M(Mt,t=>t.shape.length===1&&t.shape[0]===void 0),_d=ar(void 0);var dr=ar(null),la=M(Mt,t=>t.shape.length===1&&t.shape[0]===null),Td=M(Uint8Array),Id=M(an,t=>t.shape===Uint8Array),da=Vt(Nt,Ot,dr,cs,Ai,lr,os),Ud=(()=>{let t=rs(cr),e=ns(Ot,cr),n=Vt(Nt,Ot,dr,lr,t,e);return t.shape=n,e.shape.values=n,n})(),hn=t=>{if(ia.check(t))return t;if(Qc.check(t)){let e={};for(let n in t)e[n]=hn(t[n]);return Yc(e)}else{if(na.check(t))return Vt(...t.map(hn));if(da.check(t))return ar(t);if(sa.check(t))return M(t)}ue()},Zo=Ko?()=>{}:(t,e)=>{let n=new Di;if(!e.check(t,n))throw de(`Expected value to be of type ${e.constructor.name}.
${n.toString()}`)},wi=class{constructor(e){this.patterns=[],this.$state=e}if(e,n){return this.patterns.push({if:hn(e),h:n}),this}else(e){return this.if(cr,e)}done(){return(e,n)=>{for(let r=0;r<this.patterns.length;r++){let i=this.patterns[r];if(i.if.check(e))return i.h(e,n)}throw de("Unhandled pattern")}}},ha=t=>new wi(t),as=ha(cr).if(ss,(t,e)=>Qn(e,Jr,bt)).if(us,(t,e)=>Qo(e)).if(aa,(t,e)=>fi(e)).if(ca,(t,e)=>BigInt(Qn(e,Jr,bt))).if(ur,(t,e)=>Lt(e,Zn(e,t.shape))).if(Xc,(t,e)=>{let n={};for(let r in t.shape){let i=t.shape[r];if(Kc.check(i)){if(fi(e))continue;i=i.shape}n[r]=as(i,e)}return n}).if(ta,(t,e)=>{let n=[],r=pi(e,0,42);for(let i=0;i<r;i++)n.push(Lt(e,t.shape));return n}).if(es,(t,e)=>Zn(e,t.shape)).if(la,(t,e)=>null).if(oa,(t,e)=>{let n=Lt(e,t.res);return()=>n}).if(ua,(t,e)=>Lt(e,Zn(e,[Nt,Ot,dr,cs,Ai,lr,rs(Nt),ns(Vt("a","b","c"),Nt)]))).if(Zc,(t,e)=>{let n={},r=Qn(e,0,3);for(let i=0;i<r;i++){let o=Lt(e,t.shape.keys),s=Lt(e,t.shape.values);n[o]=s}return n}).done(),Lt=(t,e)=>as(hn(e),t);var lt=typeof document<"u"?document:{};var Ld=V(t=>t.nodeType===ma);var Nd=typeof DOMParser<"u"?new DOMParser:null;var Md=V(t=>t.nodeType===pa);var Od=V(t=>t.nodeType===ga);var ls=t=>xo(t,(e,n)=>`${n}:${e};`).join("");var pa=lt.ELEMENT_NODE,ga=lt.TEXT_NODE,Vd=lt.CDATA_SECTION_NODE,$d=lt.COMMENT_NODE,Da=lt.DOCUMENT_NODE,Rd=lt.DOCUMENT_TYPE_NODE,ma=lt.DOCUMENT_FRAGMENT_NODE,jd=V(t=>t.nodeType===Da);var be=Symbol;var fn=be(),pn=be(),xi=be(),bi=be(),Fi=be(),gn=be(),vi=be(),$t=be(),ki=be(),ds=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());let e=[],n=[],r=0;for(;r<t.length;r++){let i=t[r];if(i===void 0)break;if(i.constructor===String||i.constructor===Number)e.push(i);else if(i.constructor===Object)break}for(r>0&&n.push(e.join(""));r<t.length;r++){let i=t[r];i instanceof Symbol||n.push(i)}return n};var Hd=$o();var wa={[fn]:xe("font-weight","bold"),[pn]:xe("font-weight","normal"),[xi]:xe("color","blue"),[Fi]:xe("color","green"),[bi]:xe("color","grey"),[gn]:xe("color","red"),[vi]:xe("color","purple"),[$t]:xe("color","orange"),[ki]:xe("color","black")},Aa=t=>{t.length===1&&t[0]?.constructor===Function&&(t=t[0]());let e=[],n=[],r=re(),i=[],o=0;for(;o<t.length;o++){let s=t[o],u=wa[s];if(u!==void 0)r.set(u.left,u.right);else{if(s===void 0)break;if(s.constructor===String||s.constructor===Number){let c=ls(r);o>0||c.length>0?(e.push("%c"+s),n.push(c)):e.push(s)}else break}}for(o>0&&(i=n,i.unshift(e.join("")));o<t.length;o++){let s=t[o];s instanceof Symbol||i.push(s)}return i},hs=Yo?Aa:ds,fs=(...t)=>{console.log(...hs(t)),gs.forEach(e=>e.print(t))},ps=(...t)=>{console.warn(...hs(t)),t.unshift($t),gs.forEach(e=>e.print(t))};var gs=Ie();var Ds=t=>({[Symbol.iterator](){return this},next:t}),ms=(t,e)=>Ds(()=>{let n;do n=t.next();while(!n.done&&!e(n.value));return n}),hr=(t,e)=>Ds(()=>{let{done:n,value:r}=t.next();return{done:n,value:n?void 0:e(r)}});var mn=class{constructor(e,n){this.clock=e,this.len=n}},dt=class{constructor(){this.clients=new Map}},Ts=(t,e,n)=>e.clients.forEach((r,i)=>{let o=t.doc.store.clients.get(i);if(o!=null){let s=o[o.length-1],u=s.id.clock+s.length;for(let c=0,l=r[c];c<r.length&&l.clock<u;l=r[++c])$s(t,o,l.clock,l.len,n)}}),ka=(t,e)=>{let n=0,r=t.length-1;for(;n<=r;){let i=ie((n+r)/2),o=t[i],s=o.clock;if(s<=e){if(e<s+o.len)return i;n=i+1}else r=i-1}return null},Is=(t,e)=>{let n=t.clients.get(e.client);return n!==void 0&&ka(n,e.clock)!==null},Ji=t=>{t.clients.forEach(e=>{e.sort((i,o)=>i.clock-o.clock);let n,r;for(n=1,r=1;n<e.length;n++){let i=e[r-1],o=e[n];i.clock+i.len>=o.clock?i.len=Le(i.len,o.clock+o.len-i.clock):(r<n&&(e[r]=o),r++)}e.length=r})},Sa=t=>{let e=new dt;for(let n=0;n<t.length;n++)t[n].clients.forEach((r,i)=>{if(!e.clients.has(i)){let o=r.slice();for(let s=n+1;s<t.length;s++)Fo(o,t[s].clients.get(i)||[]);e.clients.set(i,o)}});return Ji(e),e},Cr=(t,e,n,r)=>{we(t.clients,e,()=>[]).push(new mn(n,r))},Us=()=>new dt,Ba=t=>{let e=Us();return t.clients.forEach((n,r)=>{let i=[];for(let o=0;o<n.length;o++){let s=n[o];if(s.deleted){let u=s.id.clock,c=s.length;if(o+1<n.length)for(let l=n[o+1];o+1<n.length&&l.deleted;l=n[++o+1])c+=l.length;i.push(new mn(u,c))}}i.length>0&&e.clients.set(r,i)}),e},qt=(t,e)=>{_(t.restEncoder,e.clients.size),Ue(e.clients.entries()).sort((n,r)=>r[0]-n[0]).forEach(([n,r])=>{t.resetDsCurVal(),_(t.restEncoder,n);let i=r.length;_(t.restEncoder,i);for(let o=0;o<i;o++){let s=r[o];t.writeDsClock(s.clock),t.writeDsLen(s.len)}})},Wi=t=>{let e=new dt,n=F(t.restDecoder);for(let r=0;r<n;r++){t.resetDsCurVal();let i=F(t.restDecoder),o=F(t.restDecoder);if(o>0){let s=we(e.clients,i,()=>[]);for(let u=0;u<o;u++)s.push(new mn(t.readDsClock(),t.readDsLen()))}}return e},ys=(t,e,n)=>{let r=new dt,i=F(t.restDecoder);for(let o=0;o<i;o++){t.resetDsCurVal();let s=F(t.restDecoder),u=F(t.restDecoder),c=n.clients.get(s)||[],l=q(n,s);for(let d=0;d<u;d++){let h=t.readDsClock(),p=h+t.readDsLen();if(h<l){l<p&&Cr(r,s,l,p-l);let D=Fe(c,h),m=c[D];for(!m.deleted&&m.id.clock<h&&(c.splice(D+1,0,kr(e,m,h-m.id.clock)),D++);D<c.length&&(m=c[D++],m.id.clock<p);)m.deleted||(p<m.id.clock+m.length&&c.splice(D,0,kr(e,m,p-m.id.clock)),m.delete(e))}else Cr(r,s,h,p-h)}}if(r.clients.size>0){let o=new Ne;return _(o.restEncoder,0),qt(o,r),o.toUint8Array()}return null};var Ls=ti,ht=class t extends Hn{constructor({guid:e=Vo(),collectionid:n=null,gc:r=!0,gcFilter:i=()=>!0,meta:o=null,autoLoad:s=!1,shouldLoad:u=!0}={}){super(),this.gc=r,this.gcFilter=i,this.clientID=Ls(),this.guid=e,this.collectionid=n,this.share=new Map,this.store=new wr,this._transaction=null,this._transactionCleanups=[],this.subdocs=new Set,this._item=null,this.shouldLoad=u,this.autoLoad=s,this.meta=o,this.isLoaded=!1,this.isSynced=!1,this.isDestroyed=!1,this.whenLoaded=ni(l=>{this.on("load",()=>{this.isLoaded=!0,l(this)})});let c=()=>ni(l=>{let d=h=>{(h===void 0||h===!0)&&(this.off("sync",d),l())};this.on("sync",d)});this.on("sync",l=>{l===!1&&this.isSynced&&(this.whenSynced=c()),this.isSynced=l===void 0||l===!0,this.isSynced&&!this.isLoaded&&this.emit("load",[this])}),this.whenSynced=c()}load(){let e=this._item;e!==null&&!this.shouldLoad&&I(e.parent.doc,n=>{n.subdocsLoaded.add(this)},null,!0),this.shouldLoad=!0}getSubdocs(){return this.subdocs}getSubdocGuids(){return new Set(Ue(this.subdocs).map(e=>e.guid))}transact(e,n=null){return I(this,e,n)}get(e,n=$){let r=we(this.share,e,()=>{let o=new n;return o._integrate(this,null),o}),i=r.constructor;if(n!==$&&i!==n)if(i===$){let o=new n;o._map=r._map,r._map.forEach(s=>{for(;s!==null;s=s.left)s.parent=o}),o._start=r._start;for(let s=o._start;s!==null;s=s.right)s.parent=o;return o._length=r._length,this.share.set(e,o),o._integrate(this,null),o}else throw new Error(`Type with the name ${e} has already been defined with a different constructor`);return r}getArray(e=""){return this.get(e,Fr)}getText(e=""){return this.get(e,bn)}getMap(e=""){return this.get(e,An)}getXmlElement(e=""){return this.get(e,Fn)}getXmlFragment(e=""){return this.get(e,Ht)}toJSON(){let e={};return this.share.forEach((n,r)=>{e[r]=n.toJSON()}),e}destroy(){this.isDestroyed=!0,Ue(this.subdocs).forEach(n=>n.destroy());let e=this._item;if(e!==null){this._item=null;let n=e.content;n.doc=new t({guid:this.guid,...n.opts,shouldLoad:!1}),n.doc._item=e,I(e.parent.doc,r=>{let i=n.doc;e.deleted||r.subdocsAdded.add(i),r.subdocsRemoved.add(this)},null,!0)}this.emit("destroyed",[!0]),this.emit("destroy",[this]),super.destroy()}},Er=class{constructor(e){this.restDecoder=e}resetDsCurVal(){}readDsClock(){return F(this.restDecoder)}readDsLen(){return F(this.restDecoder)}},yr=class extends Er{readLeftID(){return B(F(this.restDecoder),F(this.restDecoder))}readRightID(){return B(F(this.restDecoder),F(this.restDecoder))}readClient(){return F(this.restDecoder)}readInfo(){return ot(this.restDecoder)}readString(){return st(this.restDecoder)}readParentInfo(){return F(this.restDecoder)===1}readTypeRef(){return F(this.restDecoder)}readLen(){return F(this.restDecoder)}readAny(){return Tt(this.restDecoder)}readBuf(){return Xo(ce(this.restDecoder))}readJSON(){return JSON.parse(st(this.restDecoder))}readKey(){return st(this.restDecoder)}},_i=class{constructor(e){this.dsCurrVal=0,this.restDecoder=e}resetDsCurVal(){this.dsCurrVal=0}readDsClock(){return this.dsCurrVal+=F(this.restDecoder),this.dsCurrVal}readDsLen(){let e=F(this.restDecoder)+1;return this.dsCurrVal+=e,e}},Ge=class extends _i{constructor(e){super(e),this.keys=[],F(e),this.keyClockDecoder=new It(ce(e)),this.clientDecoder=new ut(ce(e)),this.leftClockDecoder=new It(ce(e)),this.rightClockDecoder=new It(ce(e)),this.infoDecoder=new tn(ce(e),ot),this.stringDecoder=new Kn(ce(e)),this.parentInfoDecoder=new tn(ce(e),ot),this.typeRefDecoder=new ut(ce(e)),this.lenDecoder=new ut(ce(e))}readLeftID(){return new ze(this.clientDecoder.read(),this.leftClockDecoder.read())}readRightID(){return new ze(this.clientDecoder.read(),this.rightClockDecoder.read())}readClient(){return this.clientDecoder.read()}readInfo(){return this.infoDecoder.read()}readString(){return this.stringDecoder.read()}readParentInfo(){return this.parentInfoDecoder.read()===1}readTypeRef(){return this.typeRefDecoder.read()}readLen(){return this.lenDecoder.read()}readAny(){return Tt(this.restDecoder)}readBuf(){return ce(this.restDecoder)}readJSON(){return Tt(this.restDecoder)}readKey(){let e=this.keyClockDecoder.read();if(e<this.keys.length)return this.keys[e];{let n=this.stringDecoder.read();return this.keys.push(n),n}}},Ti=class{constructor(){this.restEncoder=Zt()}toUint8Array(){return Ee(this.restEncoder)}resetDsCurVal(){}writeDsClock(e){_(this.restEncoder,e)}writeDsLen(e){_(this.restEncoder,e)}},ft=class extends Ti{writeLeftID(e){_(this.restEncoder,e.client),_(this.restEncoder,e.clock)}writeRightID(e){_(this.restEncoder,e.client),_(this.restEncoder,e.clock)}writeClient(e){_(this.restEncoder,e)}writeInfo(e){Jn(this.restEncoder,e)}writeString(e){rt(this.restEncoder,e)}writeParentInfo(e){_(this.restEncoder,e?1:0)}writeTypeRef(e){_(this.restEncoder,e)}writeLen(e){_(this.restEncoder,e)}writeAny(e){St(this.restEncoder,e)}writeBuf(e){se(this.restEncoder,e)}writeJSON(e){rt(this.restEncoder,JSON.stringify(e))}writeKey(e){rt(this.restEncoder,e)}},Ii=class{constructor(){this.restEncoder=Zt(),this.dsCurrVal=0}toUint8Array(){return Ee(this.restEncoder)}resetDsCurVal(){this.dsCurrVal=0}writeDsClock(e){let n=e-this.dsCurrVal;this.dsCurrVal=e,_(this.restEncoder,n)}writeDsLen(e){e===0&&ue(),_(this.restEncoder,e-1),this.dsCurrVal+=e}},Ne=class extends Ii{constructor(){super(),this.keyMap=new Map,this.keyClock=0,this.keyClockEncoder=new Bt,this.clientEncoder=new it,this.leftClockEncoder=new Bt,this.rightClockEncoder=new Bt,this.infoEncoder=new Qt(Jn),this.stringEncoder=new Gn,this.parentInfoEncoder=new Qt(Jn),this.typeRefEncoder=new it,this.lenEncoder=new it}toUint8Array(){let e=Zt();return _(e,0),se(e,this.keyClockEncoder.toUint8Array()),se(e,this.clientEncoder.toUint8Array()),se(e,this.leftClockEncoder.toUint8Array()),se(e,this.rightClockEncoder.toUint8Array()),se(e,Ee(this.infoEncoder)),se(e,this.stringEncoder.toUint8Array()),se(e,Ee(this.parentInfoEncoder)),se(e,this.typeRefEncoder.toUint8Array()),se(e,this.lenEncoder.toUint8Array()),en(e,Ee(this.restEncoder)),Ee(e)}writeLeftID(e){this.clientEncoder.write(e.client),this.leftClockEncoder.write(e.clock)}writeRightID(e){this.clientEncoder.write(e.client),this.rightClockEncoder.write(e.clock)}writeClient(e){this.clientEncoder.write(e)}writeInfo(e){this.infoEncoder.write(e)}writeString(e){this.stringEncoder.write(e)}writeParentInfo(e){this.parentInfoEncoder.write(e?1:0)}writeTypeRef(e){this.typeRefEncoder.write(e)}writeLen(e){this.lenEncoder.write(e)}writeAny(e){St(this.restEncoder,e)}writeBuf(e){se(this.restEncoder,e)}writeJSON(e){St(this.restEncoder,e)}writeKey(e){let n=this.keyMap.get(e);n===void 0?(this.keyClockEncoder.write(this.keyClock++),this.stringEncoder.write(e)):this.keyClockEncoder.write(n)}},_a=(t,e,n,r)=>{r=Le(r,e[0].id.clock);let i=Fe(e,r);_(t.restEncoder,e.length-i),t.writeClient(n),_(t.restEncoder,r);let o=e[i];o.write(t,r-o.id.clock);for(let s=i+1;s<e.length;s++)e[s].write(t,0)},Ki=(t,e,n)=>{let r=new Map;n.forEach((i,o)=>{q(e,o)>i&&r.set(o,i)}),Qi(e).forEach((i,o)=>{n.has(o)||r.set(o,0)}),_(t.restEncoder,r.size),Ue(r.entries()).sort((i,o)=>o[0]-i[0]).forEach(([i,o])=>{_a(t,e.clients.get(i),i,o)})},Ta=(t,e)=>{let n=re(),r=F(t.restDecoder);for(let i=0;i<r;i++){let o=F(t.restDecoder),s=new Array(o),u=t.readClient(),c=F(t.restDecoder);n.set(u,{i:0,refs:s});for(let l=0;l<o;l++){let d=t.readInfo();switch(31&d){case 0:{let h=t.readLen();s[l]=new ae(B(u,c),h),c+=h;break}case 10:{let h=F(t.restDecoder);s[l]=new le(B(u,c),h),c+=h;break}default:{let h=(d&192)===0,p=new z(B(u,c),null,(d&128)===128?t.readLeftID():null,null,(d&64)===64?t.readRightID():null,h?t.readParentInfo()?e.get(t.readString()):t.readLeftID():null,h&&(d&32)===32?t.readString():null,ou(t,d));s[l]=p,c+=p.length}}}}return n},Ia=(t,e,n)=>{let r=[],i=Ue(n.keys()).sort((D,m)=>D-m);if(i.length===0)return null;let o=()=>{if(i.length===0)return null;let D=n.get(i[i.length-1]);for(;D.refs.length===D.i;)if(i.pop(),i.length>0)D=n.get(i[i.length-1]);else return null;return D},s=o();if(s===null)return null;let u=new wr,c=new Map,l=(D,m)=>{let w=c.get(D);(w==null||w>m)&&c.set(D,m)},d=s.refs[s.i++],h=new Map,p=()=>{for(let D of r){let m=D.id.client,w=n.get(m);w?(w.i--,u.clients.set(m,w.refs.slice(w.i)),n.delete(m),w.i=0,w.refs=[]):u.clients.set(m,[D]),i=i.filter(Q=>Q!==m)}r.length=0};for(;;){if(d.constructor!==le){let m=we(h,d.id.client,()=>q(e,d.id.client))-d.id.clock;if(m<0)r.push(d),l(d.id.client,d.id.clock-1),p();else{let w=d.getMissing(t,e);if(w!==null){r.push(d);let Q=n.get(w)||{refs:[],i:0};if(Q.refs.length===Q.i)l(w,q(e,w)),p();else{d=Q.refs[Q.i++];continue}}else(m===0||m<d.length)&&(d.integrate(t,m),h.set(d.id.client,d.id.clock+d.length))}}if(r.length>0)d=r.pop();else if(s!==null&&s.i<s.refs.length)d=s.refs[s.i++];else{if(s=o(),s===null)break;d=s.refs[s.i++]}}if(u.clients.size>0){let D=new Ne;return Ki(D,u,new Map),_(D.restEncoder,0),{missing:c,update:D.toUint8Array()}}return null},Ua=(t,e)=>Ki(t,e.doc.store,e.beforeState),La=(t,e,n,r=new Ge(t))=>I(e,i=>{i.local=!1;let o=!1,s=i.doc,u=s.store,c=Ta(r,s),l=Ia(i,u,c),d=u.pendingStructs;if(d){for(let[p,D]of d.missing)if(D<q(u,p)){o=!0;break}if(l){for(let[p,D]of l.missing){let m=d.missing.get(p);(m==null||m>D)&&d.missing.set(p,D)}d.update=Ar([d.update,l.update])}}else u.pendingStructs=l;let h=ys(r,i,u);if(u.pendingDs){let p=new Ge(ct(u.pendingDs));F(p.restDecoder);let D=ys(p,i,u);h&&D?u.pendingDs=Ar([h,D]):u.pendingDs=h||D}else u.pendingDs=h;if(o){let p=u.pendingStructs.update;u.pendingStructs=null,Ns(i.doc,p)}},n,!1);var Ns=(t,e,n,r=Ge)=>{let i=ct(e);La(i,t,n,new r(i))},Yi=(t,e,n)=>Ns(t,e,n,yr),Na=(t,e,n=new Map)=>{Ki(t,e.store,n),qt(t,Ba(e.store))},Ma=(t,e=new Uint8Array([0]),n=new Ne)=>{let r=Ms(e);Na(n,t,r);let i=[n.toUint8Array()];if(t.store.pendingDs&&i.push(t.store.pendingDs),t.store.pendingStructs&&i.push(Ja(t.store.pendingStructs.update,e)),i.length>1){if(n.constructor===ft)return za(i.map((o,s)=>s===0?o:Ka(o)));if(n.constructor===Ne)return Ar(i)}return i[0]},Xi=(t,e)=>Ma(t,e,new ft),Oa=t=>{let e=new Map,n=F(t.restDecoder);for(let r=0;r<n;r++){let i=F(t.restDecoder),o=F(t.restDecoder);e.set(i,o)}return e},Ms=t=>Oa(new Er(ct(t)));var Ui=class{constructor(){this.l=[]}},ws=()=>new Ui,As=(t,e)=>t.l.push(e),xs=(t,e)=>{let n=t.l,r=n.length;t.l=n.filter(i=>e!==i),r===t.l.length&&console.error("[yjs] Tried to remove event handler that doesn't exist.")},Os=(t,e,n)=>sn(t.l,[e,n]),ze=class{constructor(e,n){this.client=e,this.clock=n}},fr=(t,e)=>t===e||t!==null&&e!==null&&t.client===e.client&&t.clock===e.clock,B=(t,e)=>new ze(t,e);var Va=t=>{for(let[e,n]of t.doc.share.entries())if(n===t)return e;throw ue()};var Li=class{constructor(e,n){this.ds=e,this.sv=n}};var $a=(t,e)=>new Li(t,e),Zd=$a(Us(),new Map);var Rt=(t,e)=>e===void 0?!t.deleted:e.sv.has(t.id.client)&&(e.sv.get(t.id.client)||0)>t.id.clock&&!Is(e.ds,t.id),Ni=(t,e)=>{let n=we(t.meta,Ni,Ie),r=t.doc.store;n.has(e)||(e.sv.forEach((i,o)=>{i<q(r,o)&&Je(t,B(o,i))}),Ts(t,e.ds,i=>{}),n.add(e))};var wr=class{constructor(){this.clients=new Map,this.pendingStructs=null,this.pendingDs=null}},Qi=t=>{let e=new Map;return t.clients.forEach((n,r)=>{let i=n[n.length-1];e.set(r,i.id.clock+i.length)}),e},q=(t,e)=>{let n=t.clients.get(e);if(n===void 0)return 0;let r=n[n.length-1];return r.id.clock+r.length},Vs=(t,e)=>{let n=t.clients.get(e.id.client);if(n===void 0)n=[],t.clients.set(e.id.client,n);else{let r=n[n.length-1];if(r.id.clock+r.length!==e.id.clock)throw ue()}n.push(e)},Fe=(t,e)=>{let n=0,r=t.length-1,i=t[r],o=i.id.clock;if(o===e)return r;let s=ie(e/(o+i.length-1)*r);for(;n<=r;){if(i=t[s],o=i.id.clock,o<=e){if(e<o+i.length)return s;n=s+1}else r=s-1;s=ie((n+r)/2)}throw ue()},Ra=(t,e)=>{let n=t.clients.get(e.client);return n[Fe(n,e.clock)]},Si=Ra,Mi=(t,e,n)=>{let r=Fe(e,n),i=e[r];return i.id.clock<n&&i instanceof z?(e.splice(r+1,0,kr(t,i,n-i.id.clock)),r+1):r},Je=(t,e)=>{let n=t.doc.store.clients.get(e.client);return n[Mi(t,n,e.clock)]},bs=(t,e,n)=>{let r=e.clients.get(n.client),i=Fe(r,n.clock),o=r[i];return n.clock!==o.id.clock+o.length-1&&o.constructor!==ae&&r.splice(i+1,0,kr(t,o,n.clock-o.id.clock+1)),o},ja=(t,e,n)=>{let r=t.clients.get(e.id.client);r[Fe(r,e.id.clock)]=n},$s=(t,e,n,r,i)=>{if(r===0)return;let o=n+r,s=Mi(t,e,n),u;do u=e[s++],o<u.id.clock+u.length&&Mi(t,e,o),i(u);while(s<e.length&&e[s].id.clock<o)},Oi=class{constructor(e,n,r){this.doc=e,this.deleteSet=new dt,this.beforeState=Qi(e.store),this.afterState=new Map,this.changed=new Map,this.changedParentTypes=new Map,this._mergeStructs=[],this.origin=n,this.meta=new Map,this.local=r,this.subdocsAdded=new Set,this.subdocsRemoved=new Set,this.subdocsLoaded=new Set,this._needFormattingCleanup=!1}},Fs=(t,e)=>e.deleteSet.clients.size===0&&!bo(e.afterState,(n,r)=>e.beforeState.get(r)!==n)?!1:(Ji(e.deleteSet),Ua(t,e),qt(t,e.deleteSet),!0),vs=(t,e,n)=>{let r=e._item;(r===null||r.id.clock<(t.beforeState.get(r.id.client)||0)&&!r.deleted)&&we(t.changed,e,Ie).add(n)},Dr=(t,e)=>{let n=t[e],r=t[e-1],i=e;for(;i>0;n=r,r=t[--i-1]){if(r.deleted===n.deleted&&r.constructor===n.constructor&&r.mergeWith(n)){n instanceof z&&n.parentSub!==null&&n.parent._map.get(n.parentSub)===n&&n.parent._map.set(n.parentSub,r);continue}break}let o=e-i;return o&&t.splice(e+1-o,o),o},Ha=(t,e,n)=>{for(let[r,i]of t.clients.entries()){let o=e.clients.get(r);for(let s=i.length-1;s>=0;s--){let u=i[s],c=u.clock+u.len;for(let l=Fe(o,u.clock),d=o[l];l<o.length&&d.id.clock<c;d=o[++l]){let h=o[l];if(u.clock+u.len<=h.id.clock)break;h instanceof z&&h.deleted&&!h.keep&&n(h)&&h.gc(e,!1)}}}},Pa=(t,e)=>{t.clients.forEach((n,r)=>{let i=e.clients.get(r);for(let o=n.length-1;o>=0;o--){let s=n[o],u=Pn(i.length-1,1+Fe(i,s.clock+s.len-1));for(let c=u,l=i[c];c>0&&l.id.clock>=s.clock;l=i[c])c-=1+Dr(i,c)}})};var Rs=(t,e)=>{if(e<t.length){let n=t[e],r=n.doc,i=r.store,o=n.deleteSet,s=n._mergeStructs;try{Ji(o),n.afterState=Qi(n.doc.store),r.emit("beforeObserverCalls",[n,r]);let u=[];n.changed.forEach((c,l)=>u.push(()=>{(l._item===null||!l._item.deleted)&&l._callObserver(n,c)})),u.push(()=>{n.changedParentTypes.forEach((c,l)=>{l._dEH.l.length>0&&(l._item===null||!l._item.deleted)&&(c=c.filter(d=>d.target._item===null||!d.target._item.deleted),c.forEach(d=>{d.currentTarget=l,d._path=null}),c.sort((d,h)=>d.path.length-h.path.length),u.push(()=>{Os(l._dEH,c,n)}))}),u.push(()=>r.emit("afterTransaction",[n,r])),u.push(()=>{n._needFormattingCleanup&&sl(n)})}),sn(u,[])}finally{r.gc&&Ha(o,i,r.gcFilter),Pa(o,i),n.afterState.forEach((d,h)=>{let p=n.beforeState.get(h)||0;if(p!==d){let D=i.clients.get(h),m=Le(Fe(D,p),1);for(let w=D.length-1;w>=m;)w-=1+Dr(D,w)}});for(let d=s.length-1;d>=0;d--){let{client:h,clock:p}=s[d].id,D=i.clients.get(h),m=Fe(D,p);m+1<D.length&&Dr(D,m+1)>1||m>0&&Dr(D,m)}if(!n.local&&n.afterState.get(r.clientID)!==n.beforeState.get(r.clientID)&&(fs($t,fn,"[yjs] ",pn,gn,"Changed the client-id because another client seems to be using it."),r.clientID=Ls()),r.emit("afterTransactionCleanup",[n,r]),r._observers.has("update")){let d=new ft;Fs(d,n)&&r.emit("update",[d.toUint8Array(),n.origin,r,n])}if(r._observers.has("updateV2")){let d=new Ne;Fs(d,n)&&r.emit("updateV2",[d.toUint8Array(),n.origin,r,n])}let{subdocsAdded:u,subdocsLoaded:c,subdocsRemoved:l}=n;(u.size>0||l.size>0||c.size>0)&&(u.forEach(d=>{d.clientID=r.clientID,d.collectionid==null&&(d.collectionid=r.collectionid),r.subdocs.add(d)}),l.forEach(d=>r.subdocs.delete(d)),r.emit("subdocs",[{loaded:c,added:u,removed:l},r,n]),l.forEach(d=>d.destroy())),t.length<=e+1?(r._transactionCleanups=[],r.emit("afterAllTransactions",[r,t])):Rs(t,e+1)}}},I=(t,e,n=null,r=!0)=>{let i=t._transactionCleanups,o=!1,s=null;t._transaction===null&&(o=!0,t._transaction=new Oi(t,n,r),i.push(t._transaction),i.length===1&&t.emit("beforeAllTransactions",[t]),t.emit("beforeTransaction",[t._transaction,t]));try{s=e(t._transaction)}finally{if(o){let u=t._transaction===i[0];t._transaction=null,u&&Rs(i,0)}}return s};function*qa(t){let e=F(t.restDecoder);for(let n=0;n<e;n++){let r=F(t.restDecoder),i=t.readClient(),o=F(t.restDecoder);for(let s=0;s<r;s++){let u=t.readInfo();if(u===10){let c=F(t.restDecoder);yield new le(B(i,o),c),o+=c}else if((31&u)!==0){let c=(u&192)===0,l=new z(B(i,o),null,(u&128)===128?t.readLeftID():null,null,(u&64)===64?t.readRightID():null,c?t.readParentInfo()?t.readString():t.readLeftID():null,c&&(u&32)===32?t.readString():null,ou(t,u));yield l,o+=l.length}else{let c=t.readLen();yield new ae(B(i,o),c),o+=c}}}}var Cn=class{constructor(e,n){this.gen=qa(e),this.curr=null,this.done=!1,this.filterSkips=n,this.next()}next(){do this.curr=this.gen.next().value||null;while(this.filterSkips&&this.curr!==null&&this.curr.constructor===le);return this.curr}};var En=class{constructor(e){this.currClient=0,this.startClock=0,this.written=0,this.encoder=e,this.clientStructs=[]}},za=t=>Ar(t,yr,ft);var Ga=(t,e)=>{if(t.constructor===ae){let{client:n,clock:r}=t.id;return new ae(B(n,r+e),t.length-e)}else if(t.constructor===le){let{client:n,clock:r}=t.id;return new le(B(n,r+e),t.length-e)}else{let n=t,{client:r,clock:i}=n.id;return new z(B(r,i+e),null,B(r,i+e-1),null,n.rightOrigin,n.parent,n.parentSub,n.content.splice(e))}},Ar=(t,e=Ge,n=Ne)=>{if(t.length===1)return t[0];let r=t.map(d=>new e(ct(d))),i=r.map(d=>new Cn(d,!0)),o=null,s=new n,u=new En(s);for(;i=i.filter(p=>p.curr!==null),i.sort((p,D)=>{if(p.curr.id.client===D.curr.id.client){let m=p.curr.id.clock-D.curr.id.clock;return m===0?p.curr.constructor===D.curr.constructor?0:p.curr.constructor===le?1:-1:m}else return D.curr.id.client-p.curr.id.client}),i.length!==0;){let d=i[0],h=d.curr.id.client;if(o!==null){let p=d.curr,D=!1;for(;p!==null&&p.id.clock+p.length<=o.struct.id.clock+o.struct.length&&p.id.client>=o.struct.id.client;)p=d.next(),D=!0;if(p===null||p.id.client!==h||D&&p.id.clock>o.struct.id.clock+o.struct.length)continue;if(h!==o.struct.id.client)Pe(u,o.struct,o.offset),o={struct:p,offset:0},d.next();else if(o.struct.id.clock+o.struct.length<p.id.clock)if(o.struct.constructor===le)o.struct.length=p.id.clock+p.length-o.struct.id.clock;else{Pe(u,o.struct,o.offset);let m=p.id.clock-o.struct.id.clock-o.struct.length;o={struct:new le(B(h,o.struct.id.clock+o.struct.length),m),offset:0}}else{let m=o.struct.id.clock+o.struct.length-p.id.clock;m>0&&(o.struct.constructor===le?o.struct.length-=m:p=Ga(p,m)),o.struct.mergeWith(p)||(Pe(u,o.struct,o.offset),o={struct:p,offset:0},d.next())}}else o={struct:d.curr,offset:0},d.next();for(let p=d.curr;p!==null&&p.id.client===h&&p.id.clock===o.struct.id.clock+o.struct.length&&p.constructor!==le;p=d.next())Pe(u,o.struct,o.offset),o={struct:p,offset:0}}o!==null&&(Pe(u,o.struct,o.offset),o=null),Zi(u);let c=r.map(d=>Wi(d)),l=Sa(c);return qt(s,l),s.toUint8Array()},Ja=(t,e,n=Ge,r=Ne)=>{let i=Ms(e),o=new r,s=new En(o),u=new n(ct(t)),c=new Cn(u,!1);for(;c.curr;){let d=c.curr,h=d.id.client,p=i.get(h)||0;if(c.curr.constructor===le){c.next();continue}if(d.id.clock+d.length>p)for(Pe(s,d,Le(p-d.id.clock,0)),c.next();c.curr&&c.curr.id.client===h;)Pe(s,c.curr,0),c.next();else for(;c.curr&&c.curr.id.client===h&&c.curr.id.clock+c.curr.length<=p;)c.next()}Zi(s);let l=Wi(u);return qt(o,l),o.toUint8Array()};var js=t=>{t.written>0&&(t.clientStructs.push({written:t.written,restEncoder:Ee(t.encoder.restEncoder)}),t.encoder.restEncoder=Zt(),t.written=0)},Pe=(t,e,n)=>{t.written>0&&t.currClient!==e.id.client&&js(t),t.written===0&&(t.currClient=e.id.client,t.encoder.writeClient(e.id.client),_(t.encoder.restEncoder,e.id.clock+n)),e.write(t.encoder,n),t.written++},Zi=t=>{js(t);let e=t.encoder.restEncoder;_(e,t.clientStructs.length);for(let n=0;n<t.clientStructs.length;n++){let r=t.clientStructs[n];_(e,r.written),en(e,r.restEncoder)}},Wa=(t,e,n,r)=>{let i=new n(ct(t)),o=new Cn(i,!1),s=new r,u=new En(s);for(let l=o.curr;l!==null;l=o.next())Pe(u,e(l),0);Zi(u);let c=Wi(i);return qt(s,c),s.toUint8Array()};var Ka=t=>Wa(t,Go,Ge,ft),ks="You must not compute changes after the event-handler fired.",jt=class{constructor(e,n){this.target=e,this.currentTarget=e,this.transaction=n,this._changes=null,this._keys=null,this._delta=null,this._path=null}get path(){return this._path||(this._path=Ya(this.currentTarget,this.target))}deletes(e){return Is(this.transaction.deleteSet,e.id)}get keys(){if(this._keys===null){if(this.transaction.doc._transactionCleanups.length===0)throw de(ks);let e=new Map,n=this.target;this.transaction.changed.get(n).forEach(i=>{if(i!==null){let o=n._map.get(i),s,u;if(this.adds(o)){let c=o.left;for(;c!==null&&this.adds(c);)c=c.left;if(this.deletes(o))if(c!==null&&this.deletes(c))s="delete",u=$n(c.content.getContent());else return;else c!==null&&this.deletes(c)?(s="update",u=$n(c.content.getContent())):(s="add",u=void 0)}else if(this.deletes(o))s="delete",u=$n(o.content.getContent());else return;e.set(i,{action:s,oldValue:u})}}),this._keys=e}return this._keys}get delta(){return this.changes.delta}adds(e){return e.id.clock>=(this.transaction.beforeState.get(e.id.client)||0)}get changes(){let e=this._changes;if(e===null){if(this.transaction.doc._transactionCleanups.length===0)throw de(ks);let n=this.target,r=Ie(),i=Ie(),o=[];if(e={added:r,deleted:i,delta:o,keys:this.keys},this.transaction.changed.get(n).has(null)){let u=null,c=()=>{u&&o.push(u)};for(let l=n._start;l!==null;l=l.right)l.deleted?this.deletes(l)&&!this.adds(l)&&((u===null||u.delete===void 0)&&(c(),u={delete:0}),u.delete+=l.length,i.add(l)):this.adds(l)?((u===null||u.insert===void 0)&&(c(),u={insert:[]}),u.insert=u.insert.concat(l.content.getContent()),r.add(l)):((u===null||u.retain===void 0)&&(c(),u={retain:0}),u.retain+=l.length);u!==null&&u.retain===void 0&&c()}this._changes=e}return e}},Ya=(t,e)=>{let n=[];for(;e._item!==null&&e!==t;){if(e._item.parentSub!==null)n.unshift(e._item.parentSub);else{let r=0,i=e._item.parent._start;for(;i!==e._item&&i!==null;)!i.deleted&&i.countable&&(r+=i.length),i=i.right;n.unshift(r)}e=e._item.parent}return n},Y=()=>{ps("Invalid access: Add Yjs type to a document before reading data.")},Hs=80,eo=0,Vi=class{constructor(e,n){e.marker=!0,this.p=e,this.index=n,this.timestamp=eo++}},Xa=t=>{t.timestamp=eo++},Ps=(t,e,n)=>{t.p.marker=!1,t.p=e,e.marker=!0,t.index=n,t.timestamp=eo++},Qa=(t,e,n)=>{if(t.length>=Hs){let r=t.reduce((i,o)=>i.timestamp<o.timestamp?i:o);return Ps(r,e,n),r}else{let r=new Vi(e,n);return t.push(r),r}},Sr=(t,e)=>{if(t._start===null||e===0||t._searchMarker===null)return null;let n=t._searchMarker.length===0?null:t._searchMarker.reduce((o,s)=>tt(e-o.index)<tt(e-s.index)?o:s),r=t._start,i=0;for(n!==null&&(r=n.p,i=n.index,Xa(n));r.right!==null&&i<e;){if(!r.deleted&&r.countable){if(e<i+r.length)break;i+=r.length}r=r.right}for(;r.left!==null&&i>e;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);for(;r.left!==null&&r.left.id.client===r.id.client&&r.left.id.clock+r.left.length===r.id.clock;)r=r.left,!r.deleted&&r.countable&&(i-=r.length);return n!==null&&tt(n.index-i)<r.parent.length/Hs?(Ps(n,r,i),n):Qa(t._searchMarker,r,i)},yn=(t,e,n)=>{for(let r=t.length-1;r>=0;r--){let i=t[r];if(n>0){let o=i.p;for(o.marker=!1;o&&(o.deleted||!o.countable);)o=o.left,o&&!o.deleted&&o.countable&&(i.index-=o.length);if(o===null||o.marker===!0){t.splice(r,1);continue}i.p=o,o.marker=!0}(e<i.index||n>0&&e===i.index)&&(i.index=Le(e,i.index+n))}};var Br=(t,e,n)=>{let r=t,i=e.changedParentTypes;for(;we(i,t,()=>[]).push(n),t._item!==null;)t=t._item.parent;Os(r._eH,n,e)},$=class{constructor(){this._item=null,this._map=new Map,this._start=null,this.doc=null,this._length=0,this._eH=ws(),this._dEH=ws(),this._searchMarker=null}get parent(){return this._item?this._item.parent:null}_integrate(e,n){this.doc=e,this._item=n}_copy(){throw he()}clone(){throw he()}_write(e){}get _first(){let e=this._start;for(;e!==null&&e.deleted;)e=e.right;return e}_callObserver(e,n){!e.local&&this._searchMarker&&(this._searchMarker.length=0)}observe(e){As(this._eH,e)}observeDeep(e){As(this._dEH,e)}unobserve(e){xs(this._eH,e)}unobserveDeep(e){xs(this._dEH,e)}toJSON(){}},zs=(t,e,n)=>{t.doc??Y(),e<0&&(e=t._length+e),n<0&&(n=t._length+n);let r=n-e,i=[],o=t._start;for(;o!==null&&r>0;){if(o.countable&&!o.deleted){let s=o.content.getContent();if(s.length<=e)e-=s.length;else{for(let u=e;u<s.length&&r>0;u++)i.push(s[u]),r--;e=0}}o=o.right}return i},Gs=t=>{t.doc??Y();let e=[],n=t._start;for(;n!==null;){if(n.countable&&!n.deleted){let r=n.content.getContent();for(let i=0;i<r.length;i++)e.push(r[i])}n=n.right}return e};var wn=(t,e)=>{let n=0,r=t._start;for(t.doc??Y();r!==null;){if(r.countable&&!r.deleted){let i=r.content.getContent();for(let o=0;o<i.length;o++)e(i[o],n++,t)}r=r.right}},Js=(t,e)=>{let n=[];return wn(t,(r,i)=>{n.push(e(r,i,t))}),n},Za=t=>{let e=t._start,n=null,r=0;return{[Symbol.iterator](){return this},next:()=>{if(n===null){for(;e!==null&&e.deleted;)e=e.right;if(e===null)return{done:!0,value:void 0};n=e.content.getContent(),r=0,e=e.right}let i=n[r++];return n.length<=r&&(n=null),{done:!1,value:i}}}},Ws=(t,e)=>{t.doc??Y();let n=Sr(t,e),r=t._start;for(n!==null&&(r=n.p,e-=n.index);r!==null;r=r.right)if(!r.deleted&&r.countable){if(e<r.length)return r.content.getContent()[e];e-=r.length}},xr=(t,e,n,r)=>{let i=n,o=t.doc,s=o.clientID,u=o.store,c=n===null?e._start:n.right,l=[],d=()=>{l.length>0&&(i=new z(B(s,q(u,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Pt(l)),i.integrate(t,0),l=[])};r.forEach(h=>{if(h===null)l.push(h);else switch(h.constructor){case Number:case Object:case Boolean:case Array:case String:l.push(h);break;default:switch(d(),h.constructor){case Uint8Array:case ArrayBuffer:i=new z(B(s,q(u,s)),i,i&&i.lastId,c,c&&c.id,e,null,new kn(new Uint8Array(h))),i.integrate(t,0);break;case ht:i=new z(B(s,q(u,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Sn(h)),i.integrate(t,0);break;default:if(h instanceof $)i=new z(B(s,q(u,s)),i,i&&i.lastId,c,c&&c.id,e,null,new Oe(h)),i.integrate(t,0);else throw new Error("Unexpected content type in insert operation")}}}),d()},Ks=()=>de("Length exceeded!"),Ys=(t,e,n,r)=>{if(n>e._length)throw Ks();if(n===0)return e._searchMarker&&yn(e._searchMarker,n,r.length),xr(t,e,null,r);let i=n,o=Sr(e,n),s=e._start;for(o!==null&&(s=o.p,n-=o.index,n===0&&(s=s.prev,n+=s&&s.countable&&!s.deleted?s.length:0));s!==null;s=s.right)if(!s.deleted&&s.countable){if(n<=s.length){n<s.length&&Je(t,B(s.id.client,s.id.clock+n));break}n-=s.length}return e._searchMarker&&yn(e._searchMarker,i,r.length),xr(t,e,s,r)},el=(t,e,n)=>{let i=(e._searchMarker||[]).reduce((o,s)=>s.index>o.index?s:o,{index:0,p:e._start}).p;if(i)for(;i.right;)i=i.right;return xr(t,e,i,n)},Xs=(t,e,n,r)=>{if(r===0)return;let i=n,o=r,s=Sr(e,n),u=e._start;for(s!==null&&(u=s.p,n-=s.index);u!==null&&n>0;u=u.right)!u.deleted&&u.countable&&(n<u.length&&Je(t,B(u.id.client,u.id.clock+n)),n-=u.length);for(;r>0&&u!==null;)u.deleted||(r<u.length&&Je(t,B(u.id.client,u.id.clock+r)),u.delete(t),r-=u.length),u=u.right;if(r>0)throw Ks();e._searchMarker&&yn(e._searchMarker,i,-o+r)},br=(t,e,n)=>{let r=e._map.get(n);r!==void 0&&r.delete(t)},to=(t,e,n,r)=>{let i=e._map.get(n)||null,o=t.doc,s=o.clientID,u;if(r==null)u=new Pt([r]);else switch(r.constructor){case Number:case Object:case Boolean:case Array:case String:case Date:case BigInt:u=new Pt([r]);break;case Uint8Array:u=new kn(r);break;case ht:u=new Sn(r);break;default:if(r instanceof $)u=new Oe(r);else throw new Error("Unexpected content type")}new z(B(s,q(o.store,s)),i,i&&i.lastId,null,null,e,n,u).integrate(t,0)},no=(t,e)=>{t.doc??Y();let n=t._map.get(e);return n!==void 0&&!n.deleted?n.content.getContent()[n.length-1]:void 0},Qs=t=>{let e={};return t.doc??Y(),t._map.forEach((n,r)=>{n.deleted||(e[r]=n.content.getContent()[n.length-1])}),e},Zs=(t,e)=>{t.doc??Y();let n=t._map.get(e);return n!==void 0&&!n.deleted};var tl=(t,e)=>{let n={};return t._map.forEach((r,i)=>{let o=r;for(;o!==null&&(!e.sv.has(o.id.client)||o.id.clock>=(e.sv.get(o.id.client)||0));)o=o.left;o!==null&&Rt(o,e)&&(n[i]=o.content.getContent()[o.length-1])}),n},pr=t=>(t.doc??Y(),ms(t._map.entries(),e=>!e[1].deleted)),$i=class extends jt{},Fr=class t extends ${constructor(){super(),this._prelimContent=[],this._searchMarker=[]}static from(e){let n=new t;return n.push(e),n}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof $?n.clone():n)),e}get length(){return this.doc??Y(),this._length}_callObserver(e,n){super._callObserver(e,n),Br(this,e,new $i(this,e))}insert(e,n){this.doc!==null?I(this.doc,r=>{Ys(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}push(e){this.doc!==null?I(this.doc,n=>{el(n,this,e)}):this._prelimContent.push(...e)}unshift(e){this.insert(0,e)}delete(e,n=1){this.doc!==null?I(this.doc,r=>{Xs(r,this,e,n)}):this._prelimContent.splice(e,n)}get(e){return Ws(this,e)}toArray(){return Gs(this)}slice(e=0,n=this.length){return zs(this,e,n)}toJSON(){return this.map(e=>e instanceof $?e.toJSON():e)}map(e){return Js(this,e)}forEach(e){wn(this,e)}[Symbol.iterator](){return Za(this)}_write(e){e.writeTypeRef(xl)}},nl=t=>new Fr,Ri=class extends jt{constructor(e,n,r){super(e,n),this.keysChanged=r}},An=class t extends ${constructor(e){super(),this._prelimContent=null,e===void 0?this._prelimContent=new Map:this._prelimContent=new Map(e)}_integrate(e,n){super._integrate(e,n),this._prelimContent.forEach((r,i)=>{this.set(i,r)}),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return this.forEach((n,r)=>{e.set(r,n instanceof $?n.clone():n)}),e}_callObserver(e,n){Br(this,e,new Ri(this,e,n))}toJSON(){this.doc??Y();let e={};return this._map.forEach((n,r)=>{if(!n.deleted){let i=n.content.getContent()[n.length-1];e[r]=i instanceof $?i.toJSON():i}}),e}get size(){return[...pr(this)].length}keys(){return hr(pr(this),e=>e[0])}values(){return hr(pr(this),e=>e[1].content.getContent()[e[1].length-1])}entries(){return hr(pr(this),e=>[e[0],e[1].content.getContent()[e[1].length-1]])}forEach(e){this.doc??Y(),this._map.forEach((n,r)=>{n.deleted||e(n.content.getContent()[n.length-1],r,this)})}[Symbol.iterator](){return this.entries()}delete(e){this.doc!==null?I(this.doc,n=>{br(n,this,e)}):this._prelimContent.delete(e)}set(e,n){return this.doc!==null?I(this.doc,r=>{to(r,this,e,n)}):this._prelimContent.set(e,n),n}get(e){return no(this,e)}has(e){return Zs(this,e)}clear(){this.doc!==null?I(this.doc,e=>{this.forEach(function(n,r,i){br(e,i,r)})}):this._prelimContent.clear()}_write(e){e.writeTypeRef(bl)}},rl=t=>new An,qe=(t,e)=>t===e||typeof t=="object"&&typeof e=="object"&&t&&e&&si(t,e),xn=class{constructor(e,n,r,i){this.left=e,this.right=n,this.index=r,this.currentAttributes=i}forward(){this.right===null&&ue(),this.right.content.constructor===R?this.right.deleted||zt(this.currentAttributes,this.right.content):this.right.deleted||(this.index+=this.right.length),this.left=this.right,this.right=this.right.right}},Ss=(t,e,n)=>{for(;e.right!==null&&n>0;)e.right.content.constructor===R?e.right.deleted||zt(e.currentAttributes,e.right.content):e.right.deleted||(n<e.right.length&&Je(t,B(e.right.id.client,e.right.id.clock+n)),e.index+=e.right.length,n-=e.right.length),e.left=e.right,e.right=e.right.right;return e},gr=(t,e,n,r)=>{let i=new Map,o=r?Sr(e,n):null;if(o){let s=new xn(o.p.left,o.p,o.index,i);return Ss(t,s,n-o.index)}else{let s=new xn(null,e._start,0,i);return Ss(t,s,n)}},eu=(t,e,n,r)=>{for(;n.right!==null&&(n.right.deleted===!0||n.right.content.constructor===R&&qe(r.get(n.right.content.key),n.right.content.value));)n.right.deleted||r.delete(n.right.content.key),n.forward();let i=t.doc,o=i.clientID;r.forEach((s,u)=>{let c=n.left,l=n.right,d=new z(B(o,q(i.store,o)),c,c&&c.lastId,l,l&&l.id,e,null,new R(u,s));d.integrate(t,0),n.right=d,n.forward()})},zt=(t,e)=>{let{key:n,value:r}=e;r===null?t.delete(n):t.set(n,r)},tu=(t,e)=>{for(;t.right!==null;){if(!(t.right.deleted||t.right.content.constructor===R&&qe(e[t.right.content.key]??null,t.right.content.value)))break;t.forward()}},nu=(t,e,n,r)=>{let i=t.doc,o=i.clientID,s=new Map;for(let u in r){let c=r[u],l=n.currentAttributes.get(u)??null;if(!qe(l,c)){s.set(u,l);let{left:d,right:h}=n;n.right=new z(B(o,q(i.store,o)),d,d&&d.lastId,h,h&&h.id,e,null,new R(u,c)),n.right.integrate(t,0),n.forward()}}return s},Bi=(t,e,n,r,i)=>{n.currentAttributes.forEach((p,D)=>{i[D]===void 0&&(i[D]=null)});let o=t.doc,s=o.clientID;tu(n,i);let u=nu(t,e,n,i),c=r.constructor===String?new Me(r):r instanceof $?new Oe(r):new pt(r),{left:l,right:d,index:h}=n;e._searchMarker&&yn(e._searchMarker,n.index,c.getLength()),d=new z(B(s,q(o.store,s)),l,l&&l.lastId,d,d&&d.id,e,null,c),d.integrate(t,0),n.right=d,n.index=h,n.forward(),eu(t,e,n,u)},Bs=(t,e,n,r,i)=>{let o=t.doc,s=o.clientID;tu(n,i);let u=nu(t,e,n,i);e:for(;n.right!==null&&(r>0||u.size>0&&(n.right.deleted||n.right.content.constructor===R));){if(!n.right.deleted)switch(n.right.content.constructor){case R:{let{key:c,value:l}=n.right.content,d=i[c];if(d!==void 0){if(qe(d,l))u.delete(c);else{if(r===0)break e;u.set(c,l)}n.right.delete(t)}else n.currentAttributes.set(c,l);break}default:r<n.right.length&&Je(t,B(n.right.id.client,n.right.id.clock+r)),r-=n.right.length;break}n.forward()}if(r>0){let c="";for(;r>0;r--)c+=`
`;n.right=new z(B(s,q(o.store,s)),n.left,n.left&&n.left.lastId,n.right,n.right&&n.right.id,e,null,new Me(c)),n.right.integrate(t,0),n.forward()}eu(t,e,n,u)},ru=(t,e,n,r,i)=>{let o=e,s=re();for(;o&&(!o.countable||o.deleted);){if(!o.deleted&&o.content.constructor===R){let l=o.content;s.set(l.key,l)}o=o.right}let u=0,c=!1;for(;e!==o;){if(n===e&&(c=!0),!e.deleted){let l=e.content;if(l.constructor===R){let{key:d,value:h}=l,p=r.get(d)??null;(s.get(d)!==l||p===h)&&(e.delete(t),u++,!c&&(i.get(d)??null)===h&&p!==h&&(p===null?i.delete(d):i.set(d,p))),!c&&!e.deleted&&zt(i,l)}}e=e.right}return u},il=(t,e)=>{for(;e&&e.right&&(e.right.deleted||!e.right.countable);)e=e.right;let n=new Set;for(;e&&(e.deleted||!e.countable);){if(!e.deleted&&e.content.constructor===R){let r=e.content.key;n.has(r)?e.delete(t):n.add(r)}e=e.left}},ol=t=>{let e=0;return I(t.doc,n=>{let r=t._start,i=t._start,o=re(),s=Vn(o);for(;i;)i.deleted===!1&&(i.content.constructor===R?zt(s,i.content):(e+=ru(n,r,i,o,s),o=Vn(s),r=i)),i=i.right}),e},sl=t=>{let e=new Set,n=t.doc;for(let[r,i]of t.afterState.entries()){let o=t.beforeState.get(r)||0;i!==o&&$s(t,n.store.clients.get(r),o,i,s=>{!s.deleted&&s.content.constructor===R&&s.constructor!==ae&&e.add(s.parent)})}I(n,r=>{Ts(t,t.deleteSet,i=>{if(i instanceof ae||!i.parent._hasFormatting||e.has(i.parent))return;let o=i.parent;i.content.constructor===R?e.add(o):il(r,i)});for(let i of e)ol(i)})},_s=(t,e,n)=>{let r=n,i=Vn(e.currentAttributes),o=e.right;for(;n>0&&e.right!==null;){if(e.right.deleted===!1)switch(e.right.content.constructor){case Oe:case pt:case Me:n<e.right.length&&Je(t,B(e.right.id.client,e.right.id.clock+n)),n-=e.right.length,e.right.delete(t);break}e.forward()}o&&ru(t,o,e.right,i,e.currentAttributes);let s=(e.left||e.right).parent;return s._searchMarker&&yn(s._searchMarker,e.index,-r+n),e},ji=class extends jt{constructor(e,n,r){super(e,n),this.childListChanged=!1,this.keysChanged=new Set,r.forEach(i=>{i===null?this.childListChanged=!0:this.keysChanged.add(i)})}get changes(){if(this._changes===null){let e={keys:this.keys,delta:this.delta,added:new Set,deleted:new Set};this._changes=e}return this._changes}get delta(){if(this._delta===null){let e=this.target.doc,n=[];I(e,r=>{let i=new Map,o=new Map,s=this.target._start,u=null,c={},l="",d=0,h=0,p=()=>{if(u!==null){let D=null;switch(u){case"delete":h>0&&(D={delete:h}),h=0;break;case"insert":(typeof l=="object"||l.length>0)&&(D={insert:l},i.size>0&&(D.attributes={},i.forEach((m,w)=>{m!==null&&(D.attributes[w]=m)}))),l="";break;case"retain":d>0&&(D={retain:d},zo(c)||(D.attributes=Po({},c))),d=0;break}D&&n.push(D),u=null}};for(;s!==null;){switch(s.content.constructor){case Oe:case pt:this.adds(s)?this.deletes(s)||(p(),u="insert",l=s.content.getContent()[0],p()):this.deletes(s)?(u!=="delete"&&(p(),u="delete"),h+=1):s.deleted||(u!=="retain"&&(p(),u="retain"),d+=1);break;case Me:this.adds(s)?this.deletes(s)||(u!=="insert"&&(p(),u="insert"),l+=s.content.str):this.deletes(s)?(u!=="delete"&&(p(),u="delete"),h+=s.length):s.deleted||(u!=="retain"&&(p(),u="retain"),d+=s.length);break;case R:{let{key:D,value:m}=s.content;if(this.adds(s)){if(!this.deletes(s)){let w=i.get(D)??null;qe(w,m)?m!==null&&s.delete(r):(u==="retain"&&p(),qe(m,o.get(D)??null)?delete c[D]:c[D]=m)}}else if(this.deletes(s)){o.set(D,m);let w=i.get(D)??null;qe(w,m)||(u==="retain"&&p(),c[D]=w)}else if(!s.deleted){o.set(D,m);let w=c[D];w!==void 0&&(qe(w,m)?w!==null&&s.delete(r):(u==="retain"&&p(),m===null?delete c[D]:c[D]=m))}s.deleted||(u==="insert"&&p(),zt(i,s.content));break}}s=s.right}for(p();n.length>0;){let D=n[n.length-1];if(D.retain!==void 0&&D.attributes===void 0)n.pop();else break}}),this._delta=n}return this._delta}},bn=class t extends ${constructor(e){super(),this._pending=e!==void 0?[()=>this.insert(0,e)]:[],this._searchMarker=[],this._hasFormatting=!1}get length(){return this.doc??Y(),this._length}_integrate(e,n){super._integrate(e,n);try{this._pending.forEach(r=>r())}catch(r){console.error(r)}this._pending=null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}_callObserver(e,n){super._callObserver(e,n);let r=new ji(this,e,n);Br(this,e,r),!e.local&&this._hasFormatting&&(e._needFormattingCleanup=!0)}toString(){this.doc??Y();let e="",n=this._start;for(;n!==null;)!n.deleted&&n.countable&&n.content.constructor===Me&&(e+=n.content.str),n=n.right;return e}toJSON(){return this.toString()}applyDelta(e,{sanitize:n=!0}={}){this.doc!==null?I(this.doc,r=>{let i=new xn(null,this._start,0,new Map);for(let o=0;o<e.length;o++){let s=e[o];if(s.insert!==void 0){let u=!n&&typeof s.insert=="string"&&o===e.length-1&&i.right===null&&s.insert.slice(-1)===`
`?s.insert.slice(0,-1):s.insert;(typeof u!="string"||u.length>0)&&Bi(r,this,i,u,s.attributes||{})}else s.retain!==void 0?Bs(r,this,i,s.retain,s.attributes||{}):s.delete!==void 0&&_s(r,i,s.delete)}}):this._pending.push(()=>this.applyDelta(e))}toDelta(e,n,r){this.doc??Y();let i=[],o=new Map,s=this.doc,u="",c=this._start;function l(){if(u.length>0){let h={},p=!1;o.forEach((m,w)=>{p=!0,h[w]=m});let D={insert:u};p&&(D.attributes=h),i.push(D),u=""}}let d=()=>{for(;c!==null;){if(Rt(c,e)||n!==void 0&&Rt(c,n))switch(c.content.constructor){case Me:{let h=o.get("ychange");e!==void 0&&!Rt(c,e)?(h===void 0||h.user!==c.id.client||h.type!=="removed")&&(l(),o.set("ychange",r?r("removed",c.id):{type:"removed"})):n!==void 0&&!Rt(c,n)?(h===void 0||h.user!==c.id.client||h.type!=="added")&&(l(),o.set("ychange",r?r("added",c.id):{type:"added"})):h!==void 0&&(l(),o.delete("ychange")),u+=c.content.str;break}case Oe:case pt:{l();let h={insert:c.content.getContent()[0]};if(o.size>0){let p={};h.attributes=p,o.forEach((D,m)=>{p[m]=D})}i.push(h);break}case R:Rt(c,e)&&(l(),zt(o,c.content));break}c=c.right}l()};return e||n?I(s,h=>{e&&Ni(h,e),n&&Ni(h,n),d()},"cleanup"):d(),i}insert(e,n,r){if(n.length<=0)return;let i=this.doc;i!==null?I(i,o=>{let s=gr(o,this,e,!r);r||(r={},s.currentAttributes.forEach((u,c)=>{r[c]=u})),Bi(o,this,s,n,r)}):this._pending.push(()=>this.insert(e,n,r))}insertEmbed(e,n,r){let i=this.doc;i!==null?I(i,o=>{let s=gr(o,this,e,!r);Bi(o,this,s,n,r||{})}):this._pending.push(()=>this.insertEmbed(e,n,r||{}))}delete(e,n){if(n===0)return;let r=this.doc;r!==null?I(r,i=>{_s(i,gr(i,this,e,!0),n)}):this._pending.push(()=>this.delete(e,n))}format(e,n,r){if(n===0)return;let i=this.doc;i!==null?I(i,o=>{let s=gr(o,this,e,!1);s.right!==null&&Bs(o,this,s,n,r)}):this._pending.push(()=>this.format(e,n,r))}removeAttribute(e){this.doc!==null?I(this.doc,n=>{br(n,this,e)}):this._pending.push(()=>this.removeAttribute(e))}setAttribute(e,n){this.doc!==null?I(this.doc,r=>{to(r,this,e,n)}):this._pending.push(()=>this.setAttribute(e,n))}getAttribute(e){return no(this,e)}getAttributes(){return Qs(this)}_write(e){e.writeTypeRef(Fl)}},ul=t=>new bn,Dn=class{constructor(e,n=()=>!0){this._filter=n,this._root=e,this._currentNode=e._start,this._firstCall=!0,e.doc??Y()}[Symbol.iterator](){return this}next(){let e=this._currentNode,n=e&&e.content&&e.content.type;if(e!==null&&(!this._firstCall||e.deleted||!this._filter(n)))do if(n=e.content.type,!e.deleted&&(n.constructor===Fn||n.constructor===Ht)&&n._start!==null)e=n._start;else for(;e!==null;){let r=e.next;if(r!==null){e=r;break}else e.parent===this._root?e=null:e=e.parent._item}while(e!==null&&(e.deleted||!this._filter(e.content.type)));return this._firstCall=!1,e===null?{value:void 0,done:!0}:(this._currentNode=e,{value:e.content.type,done:!1})}},Ht=class t extends ${constructor(){super(),this._prelimContent=[]}get firstChild(){let e=this._first;return e?e.content.getContent()[0]:null}_integrate(e,n){super._integrate(e,n),this.insert(0,this._prelimContent),this._prelimContent=null}_copy(){return new t}clone(){let e=new t;return e.insert(0,this.toArray().map(n=>n instanceof $?n.clone():n)),e}get length(){return this.doc??Y(),this._prelimContent===null?this._length:this._prelimContent.length}createTreeWalker(e){return new Dn(this,e)}querySelector(e){e=e.toUpperCase();let r=new Dn(this,i=>i.nodeName&&i.nodeName.toUpperCase()===e).next();return r.done?null:r.value}querySelectorAll(e){return e=e.toUpperCase(),Ue(new Dn(this,n=>n.nodeName&&n.nodeName.toUpperCase()===e))}_callObserver(e,n){Br(this,e,new Hi(this,n,e))}toString(){return Js(this,e=>e.toString()).join("")}toJSON(){return this.toString()}toDOM(e=document,n={},r){let i=e.createDocumentFragment();return r!==void 0&&r._createAssociation(i,this),wn(this,o=>{i.insertBefore(o.toDOM(e,n,r),null)}),i}insert(e,n){this.doc!==null?I(this.doc,r=>{Ys(r,this,e,n)}):this._prelimContent.splice(e,0,...n)}insertAfter(e,n){if(this.doc!==null)I(this.doc,r=>{let i=e&&e instanceof $?e._item:e;xr(r,this,i,n)});else{let r=this._prelimContent,i=e===null?0:r.findIndex(o=>o===e)+1;if(i===0&&e!==null)throw de("Reference item not found");r.splice(i,0,...n)}}delete(e,n=1){this.doc!==null?I(this.doc,r=>{Xs(r,this,e,n)}):this._prelimContent.splice(e,n)}toArray(){return Gs(this)}push(e){this.insert(this.length,e)}unshift(e){this.insert(0,e)}get(e){return Ws(this,e)}slice(e=0,n=this.length){return zs(this,e,n)}forEach(e){wn(this,e)}_write(e){e.writeTypeRef(kl)}},cl=t=>new Ht,Fn=class t extends Ht{constructor(e="UNDEFINED"){super(),this.nodeName=e,this._prelimAttrs=new Map}get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_integrate(e,n){super._integrate(e,n),this._prelimAttrs.forEach((r,i)=>{this.setAttribute(i,r)}),this._prelimAttrs=null}_copy(){return new t(this.nodeName)}clone(){let e=new t(this.nodeName),n=this.getAttributes();return qo(n,(r,i)=>{e.setAttribute(i,r)}),e.insert(0,this.toArray().map(r=>r instanceof $?r.clone():r)),e}toString(){let e=this.getAttributes(),n=[],r=[];for(let u in e)r.push(u);r.sort();let i=r.length;for(let u=0;u<i;u++){let c=r[u];n.push(c+'="'+e[c]+'"')}let o=this.nodeName.toLocaleLowerCase(),s=n.length>0?" "+n.join(" "):"";return`<${o}${s}>${super.toString()}</${o}>`}removeAttribute(e){this.doc!==null?I(this.doc,n=>{br(n,this,e)}):this._prelimAttrs.delete(e)}setAttribute(e,n){this.doc!==null?I(this.doc,r=>{to(r,this,e,n)}):this._prelimAttrs.set(e,n)}getAttribute(e){return no(this,e)}hasAttribute(e){return Zs(this,e)}getAttributes(e){return e?tl(this,e):Qs(this)}toDOM(e=document,n={},r){let i=e.createElement(this.nodeName),o=this.getAttributes();for(let s in o){let u=o[s];typeof u=="string"&&i.setAttribute(s,u)}return wn(this,s=>{i.appendChild(s.toDOM(e,n,r))}),r!==void 0&&r._createAssociation(i,this),i}_write(e){e.writeTypeRef(vl),e.writeKey(this.nodeName)}},al=t=>new Fn(t.readKey()),Hi=class extends jt{constructor(e,n,r){super(e,r),this.childListChanged=!1,this.attributesChanged=new Set,n.forEach(i=>{i===null?this.childListChanged=!0:this.attributesChanged.add(i)})}},Pi=class t extends An{constructor(e){super(),this.hookName=e}_copy(){return new t(this.hookName)}clone(){let e=new t(this.hookName);return this.forEach((n,r)=>{e.set(r,n)}),e}toDOM(e=document,n={},r){let i=n[this.hookName],o;return i!==void 0?o=i.createDom(this):o=document.createElement(this.hookName),o.setAttribute("data-yjs-hook",this.hookName),r!==void 0&&r._createAssociation(o,this),o}_write(e){e.writeTypeRef(Sl),e.writeKey(this.hookName)}},ll=t=>new Pi(t.readKey()),qi=class t extends bn{get nextSibling(){let e=this._item?this._item.next:null;return e?e.content.type:null}get prevSibling(){let e=this._item?this._item.prev:null;return e?e.content.type:null}_copy(){return new t}clone(){let e=new t;return e.applyDelta(this.toDelta()),e}toDOM(e=document,n,r){let i=e.createTextNode(this.toString());return r!==void 0&&r._createAssociation(i,this),i}toString(){return this.toDelta().map(e=>{let n=[];for(let i in e.attributes){let o=[];for(let s in e.attributes[i])o.push({key:s,value:e.attributes[i][s]});o.sort((s,u)=>s.key<u.key?-1:1),n.push({nodeName:i,attrs:o})}n.sort((i,o)=>i.nodeName<o.nodeName?-1:1);let r="";for(let i=0;i<n.length;i++){let o=n[i];r+=`<${o.nodeName}`;for(let s=0;s<o.attrs.length;s++){let u=o.attrs[s];r+=` ${u.key}="${u.value}"`}r+=">"}r+=e.insert;for(let i=n.length-1;i>=0;i--)r+=`</${n[i].nodeName}>`;return r}).join("")}toJSON(){return this.toString()}_write(e){e.writeTypeRef(Bl)}},dl=t=>new qi,vn=class{constructor(e,n){this.id=e,this.length=n}get deleted(){throw he()}mergeWith(e){return!1}write(e,n,r){throw he()}integrate(e,n){throw he()}},hl=0,ae=class extends vn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){n>0&&(this.id.clock+=n,this.length-=n),Vs(e.doc.store,this)}write(e,n){e.writeInfo(hl),e.writeLen(this.length-n)}getMissing(e,n){return null}},kn=class t{constructor(e){this.content=e}getLength(){return 1}getContent(){return[this.content]}isCountable(){return!0}copy(){return new t(this.content)}splice(e){throw he()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeBuf(this.content)}getRef(){return 3}},fl=t=>new kn(t.readBuf()),vr=class t{constructor(e){this.len=e}getLength(){return this.len}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.len)}splice(e){let n=new t(this.len-e);return this.len=e,n}mergeWith(e){return this.len+=e.len,!0}integrate(e,n){Cr(e.deleteSet,n.id.client,n.id.clock,this.len),n.markDeleted()}delete(e){}gc(e){}write(e,n){e.writeLen(this.len-n)}getRef(){return 1}},pl=t=>new vr(t.readLen()),iu=(t,e)=>new ht({guid:t,...e,shouldLoad:e.shouldLoad||e.autoLoad||!1}),Sn=class t{constructor(e){e._item&&console.error("This document was already integrated as a sub-document. You should create a second instance instead with the same guid."),this.doc=e;let n={};this.opts=n,e.gc||(n.gc=!1),e.autoLoad&&(n.autoLoad=!0),e.meta!==null&&(n.meta=e.meta)}getLength(){return 1}getContent(){return[this.doc]}isCountable(){return!0}copy(){return new t(iu(this.doc.guid,this.opts))}splice(e){throw he()}mergeWith(e){return!1}integrate(e,n){this.doc._item=n,e.subdocsAdded.add(this.doc),this.doc.shouldLoad&&e.subdocsLoaded.add(this.doc)}delete(e){e.subdocsAdded.has(this.doc)?e.subdocsAdded.delete(this.doc):e.subdocsRemoved.add(this.doc)}gc(e){}write(e,n){e.writeString(this.doc.guid),e.writeAny(this.opts)}getRef(){return 9}},gl=t=>new Sn(iu(t.readString(),t.readAny())),pt=class t{constructor(e){this.embed=e}getLength(){return 1}getContent(){return[this.embed]}isCountable(){return!0}copy(){return new t(this.embed)}splice(e){throw he()}mergeWith(e){return!1}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeJSON(this.embed)}getRef(){return 5}},Dl=t=>new pt(t.readJSON()),R=class t{constructor(e,n){this.key=e,this.value=n}getLength(){return 1}getContent(){return[]}isCountable(){return!1}copy(){return new t(this.key,this.value)}splice(e){throw he()}mergeWith(e){return!1}integrate(e,n){let r=n.parent;r._searchMarker=null,r._hasFormatting=!0}delete(e){}gc(e){}write(e,n){e.writeKey(this.key),e.writeJSON(this.value)}getRef(){return 6}},ml=t=>new R(t.readKey(),t.readJSON()),zi=class t{constructor(e){this.arr=e}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let o=this.arr[i];e.writeString(o===void 0?"undefined":JSON.stringify(o))}}getRef(){return 2}},Cl=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++){let i=t.readString();i==="undefined"?n.push(void 0):n.push(JSON.parse(i))}return new zi(n)},El=cn("node_env")==="development",Pt=class t{constructor(e){this.arr=e,El&&ui(e)}getLength(){return this.arr.length}getContent(){return this.arr}isCountable(){return!0}copy(){return new t(this.arr)}splice(e){let n=new t(this.arr.slice(e));return this.arr=this.arr.slice(0,e),n}mergeWith(e){return this.arr=this.arr.concat(e.arr),!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){let r=this.arr.length;e.writeLen(r-n);for(let i=n;i<r;i++){let o=this.arr[i];e.writeAny(o)}}getRef(){return 8}},yl=t=>{let e=t.readLen(),n=[];for(let r=0;r<e;r++)n.push(t.readAny());return new Pt(n)},Me=class t{constructor(e){this.str=e}getLength(){return this.str.length}getContent(){return this.str.split("")}isCountable(){return!0}copy(){return new t(this.str)}splice(e){let n=new t(this.str.slice(e));this.str=this.str.slice(0,e);let r=this.str.charCodeAt(e-1);return r>=55296&&r<=56319&&(this.str=this.str.slice(0,e-1)+"\uFFFD",n.str="\uFFFD"+n.str.slice(1)),n}mergeWith(e){return this.str+=e.str,!0}integrate(e,n){}delete(e){}gc(e){}write(e,n){e.writeString(n===0?this.str:this.str.slice(n))}getRef(){return 4}},wl=t=>new Me(t.readString()),Al=[nl,rl,ul,al,cl,ll,dl],xl=0,bl=1,Fl=2,vl=3,kl=4,Sl=5,Bl=6,Oe=class t{constructor(e){this.type=e}getLength(){return 1}getContent(){return[this.type]}isCountable(){return!0}copy(){return new t(this.type._copy())}splice(e){throw he()}mergeWith(e){return!1}integrate(e,n){this.type._integrate(e.doc,n)}delete(e){let n=this.type._start;for(;n!==null;)n.deleted?n.id.clock<(e.beforeState.get(n.id.client)||0)&&e._mergeStructs.push(n):n.delete(e),n=n.right;this.type._map.forEach(r=>{r.deleted?r.id.clock<(e.beforeState.get(r.id.client)||0)&&e._mergeStructs.push(r):r.delete(e)}),e.changed.delete(this.type)}gc(e){let n=this.type._start;for(;n!==null;)n.gc(e,!0),n=n.right;this.type._start=null,this.type._map.forEach(r=>{for(;r!==null;)r.gc(e,!0),r=r.left}),this.type._map=new Map}write(e,n){this.type._write(e)}getRef(){return 7}},_l=t=>new Oe(Al[t.readTypeRef()](t));var kr=(t,e,n)=>{let{client:r,clock:i}=e.id,o=new z(B(r,i+n),e,B(r,i+n-1),e.right,e.rightOrigin,e.parent,e.parentSub,e.content.splice(n));return e.deleted&&o.markDeleted(),e.keep&&(o.keep=!0),e.redone!==null&&(o.redone=B(e.redone.client,e.redone.clock+n)),e.right=o,o.right!==null&&(o.right.left=o),t._mergeStructs.push(o),o.parentSub!==null&&o.right===null&&o.parent._map.set(o.parentSub,o),e.length=n,o};var z=class t extends vn{constructor(e,n,r,i,o,s,u,c){super(e,c.getLength()),this.origin=r,this.left=n,this.right=i,this.rightOrigin=o,this.parent=s,this.parentSub=u,this.redone=null,this.content=c,this.info=this.content.isCountable()?2:0}set marker(e){(this.info&8)>0!==e&&(this.info^=8)}get marker(){return(this.info&8)>0}get keep(){return(this.info&1)>0}set keep(e){this.keep!==e&&(this.info^=1)}get countable(){return(this.info&2)>0}get deleted(){return(this.info&4)>0}set deleted(e){this.deleted!==e&&(this.info^=4)}markDeleted(){this.info|=4}getMissing(e,n){if(this.origin&&this.origin.client!==this.id.client&&this.origin.clock>=q(n,this.origin.client))return this.origin.client;if(this.rightOrigin&&this.rightOrigin.client!==this.id.client&&this.rightOrigin.clock>=q(n,this.rightOrigin.client))return this.rightOrigin.client;if(this.parent&&this.parent.constructor===ze&&this.id.client!==this.parent.client&&this.parent.clock>=q(n,this.parent.client))return this.parent.client;if(this.origin&&(this.left=bs(e,n,this.origin),this.origin=this.left.lastId),this.rightOrigin&&(this.right=Je(e,this.rightOrigin),this.rightOrigin=this.right.id),this.left&&this.left.constructor===ae||this.right&&this.right.constructor===ae)this.parent=null;else if(!this.parent)this.left&&this.left.constructor===t?(this.parent=this.left.parent,this.parentSub=this.left.parentSub):this.right&&this.right.constructor===t&&(this.parent=this.right.parent,this.parentSub=this.right.parentSub);else if(this.parent.constructor===ze){let r=Si(n,this.parent);r.constructor===ae?this.parent=null:this.parent=r.content.type}return null}integrate(e,n){if(n>0&&(this.id.clock+=n,this.left=bs(e,e.doc.store,B(this.id.client,this.id.clock-1)),this.origin=this.left.lastId,this.content=this.content.splice(n),this.length-=n),this.parent){if(!this.left&&(!this.right||this.right.left!==null)||this.left&&this.left.right!==this.right){let r=this.left,i;if(r!==null)i=r.right;else if(this.parentSub!==null)for(i=this.parent._map.get(this.parentSub)||null;i!==null&&i.left!==null;)i=i.left;else i=this.parent._start;let o=new Set,s=new Set;for(;i!==null&&i!==this.right;){if(s.add(i),o.add(i),fr(this.origin,i.origin)){if(i.id.client<this.id.client)r=i,o.clear();else if(fr(this.rightOrigin,i.rightOrigin))break}else if(i.origin!==null&&s.has(Si(e.doc.store,i.origin)))o.has(Si(e.doc.store,i.origin))||(r=i,o.clear());else break;i=i.right}this.left=r}if(this.left!==null){let r=this.left.right;this.right=r,this.left.right=this}else{let r;if(this.parentSub!==null)for(r=this.parent._map.get(this.parentSub)||null;r!==null&&r.left!==null;)r=r.left;else r=this.parent._start,this.parent._start=this;this.right=r}this.right!==null?this.right.left=this:this.parentSub!==null&&(this.parent._map.set(this.parentSub,this),this.left!==null&&this.left.delete(e)),this.parentSub===null&&this.countable&&!this.deleted&&(this.parent._length+=this.length),Vs(e.doc.store,this),this.content.integrate(e,this),vs(e,this.parent,this.parentSub),(this.parent._item!==null&&this.parent._item.deleted||this.parentSub!==null&&this.right!==null)&&this.delete(e)}else new ae(this.id,this.length).integrate(e,0)}get next(){let e=this.right;for(;e!==null&&e.deleted;)e=e.right;return e}get prev(){let e=this.left;for(;e!==null&&e.deleted;)e=e.left;return e}get lastId(){return this.length===1?this.id:B(this.id.client,this.id.clock+this.length-1)}mergeWith(e){if(this.constructor===e.constructor&&fr(e.origin,this.lastId)&&this.right===e&&fr(this.rightOrigin,e.rightOrigin)&&this.id.client===e.id.client&&this.id.clock+this.length===e.id.clock&&this.deleted===e.deleted&&this.redone===null&&e.redone===null&&this.content.constructor===e.content.constructor&&this.content.mergeWith(e.content)){let n=this.parent._searchMarker;return n&&n.forEach(r=>{r.p===e&&(r.p=this,!this.deleted&&this.countable&&(r.index-=this.length))}),e.keep&&(this.keep=!0),this.right=e.right,this.right!==null&&(this.right.left=this),this.length+=e.length,!0}return!1}delete(e){if(!this.deleted){let n=this.parent;this.countable&&this.parentSub===null&&(n._length-=this.length),this.markDeleted(),Cr(e.deleteSet,this.id.client,this.id.clock,this.length),vs(e,n,this.parentSub),this.content.delete(e)}}gc(e,n){if(!this.deleted)throw ue();this.content.gc(e),n?ja(e,this,new ae(this.id,this.length)):this.content=new vr(this.length)}write(e,n){let r=n>0?B(this.id.client,this.id.clock+n-1):this.origin,i=this.rightOrigin,o=this.parentSub,s=this.content.getRef()&31|(r===null?0:128)|(i===null?0:64)|(o===null?0:32);if(e.writeInfo(s),r!==null&&e.writeLeftID(r),i!==null&&e.writeRightID(i),r===null&&i===null){let u=this.parent;if(u._item!==void 0){let c=u._item;if(c===null){let l=Va(u);e.writeParentInfo(!0),e.writeString(l)}else e.writeParentInfo(!1),e.writeLeftID(c.id)}else u.constructor===String?(e.writeParentInfo(!0),e.writeString(u)):u.constructor===ze?(e.writeParentInfo(!1),e.writeLeftID(u)):ue();o!==null&&e.writeString(o)}this.content.write(e,n)}},ou=(t,e)=>Tl[e&31](t),Tl=[()=>{ue()},pl,Cl,fl,wl,Dl,ml,_l,yl,gl,()=>{ue()}],Il=10,le=class extends vn{get deleted(){return!0}delete(){}mergeWith(e){return this.constructor!==e.constructor?!1:(this.length+=e.length,!0)}integrate(e,n){ue()}write(e,n){e.writeInfo(Il),_(e.restEncoder,this.length-n)}getMissing(e,n){return null}},su=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:{},uu="__ $YJS$ __";su[uu]===!0&&console.error("Yjs was already imported. This breaks constructor checks and will lead to issues! - https://github.com/yjs/yjs/issues/438");su[uu]=!0;var gt={};window.mgl=gt;var j=new On("/",{reConnect:!0,logs:!0,token:"TailPad"});j.on("connect_forbidden",console.error);j.on("connect_serverError",console.error);j.on("connect_unauthorized",console.error);var We=new ht,X=We.getMap("root");gt.state={client:j,ydoc:We,root:X};function Dt(t){return new Promise(e=>setTimeout(e,t))}var mt={html(t){return t!==void 0?(this.innerHTML=t,this):this.innerHTML},v(t){return t!==void 0?(this.value=t,this):this.value},on(t,e){return this.addEventListener(t,e),this},css(t,e=null){return typeof t=="string"?e!==null?this.style[t]=e:this.style.cssText=t:Object.assign(this.style,t),this},attrib(t,e=null){return e!==null?(this.setAttribute(t,e),this):this.getAttribute(t)||""},clA(...t){return this.classList.add(...t),this},clR(...t){return this.classList.remove(...t),this},clT(t,e){return this.classList.toggle(t,e),this},animateFade(t,e={}){let{time:n=200,cb:r}=e,i=this,o=t===0?1:0,s=Math.min(1,Math.max(0,t)),u=performance.now();i.style.opacity=s.toString();function c(l){let d=l-u,h=Math.min(d/n,1),p=s+(o-s)*h;i.style.opacity=p.toString(),h<1?requestAnimationFrame(c):(i.style.opacity=o.toString(),r?.())}return requestAnimationFrame(c),this},fadeIn(...t){let e=au({display:"string",cb:"function",time:"number"},t),{display:n="block"}=e;return this.css("display",n),this.animateFade(0,e),this.fade=!0,this},fadeOut(...t){let e=au({cb:"function",time:"number"},t),n=e.time??300;return e.time=n,this.animateFade(1,{...e,cb:()=>{this.css("display","none"),e.cb?.()}}),this.fade=!1,this},async fadeInP(...t){return new Promise(e=>{this.fadeIn(...t,()=>e(this))})},async fadeOutP(...t){return new Promise(e=>{this.fadeOut(...t,()=>e(this))})},fade:!0,fadeToggle(){return this.fade?this.fadeOut():this.fadeIn(),this},add(t){return this.appendChild(t),this},addUp(t){return this.insertBefore(t,this.firstChild),this},qs(t,e=0){return e&&(t=`[data-id="${t}"]`),this.querySelector(t)}};mt.qi=mt.qs;function au(t,e){let n={};if(e.length===0)return n;if(e.every(r=>typeof r=="object"))return Object.assign({},...e);for(let r of e)for(let[i,o]of Object.entries(t))if(typeof r===o){n[i]=r;break}return n}Object.assign(HTMLElement.prototype,mt);Object.assign(document,mt);Object.assign(document.body,mt);Object.assign(document.documentElement,mt);window.qs=window.qi=mt.qs.bind(document);var ro=qs("#FD-message"),_r=qs("#FD-prompt"),Ll=(t,...e)=>t.replace(/\\\$|(?<!\\)\$/g,n=>n==="\\$"?"$":e.shift()?.toString()||"$");async function lu(t,e={}){e={displayTime:6e3,...e};let n=document.createElement("div");n.innerHTML=t,n.style.top=`-${n.offsetHeight+20}px`,e.className&&n.classList.add(e.className),e.backgroundColor&&(n.style.backgroundColor=e.backgroundColor);let r=10,i=o();function o(){let c=0;for(let l of ro.children)c+=l.offsetHeight+r;return c}let s=!1;async function u(){s=!0,n.style.top=`-${n.offsetHeight+20}px`,await Dt(700);for(let c of ro.children){let l=c,d=parseInt(l.style.top.replace("px",""));l.style.top=`${d-r-n.offsetHeight}px`}n.remove()}n.addEventListener("click",u),e.onClick&&n.addEventListener("click",e.onClick),ro.appendChild(n),await Dt(100),n.style.top=`${10+i}px`,await Dt(e.displayTime-700),!s&&await u()}async function oe(t,e={}){e={extraTime:0,...e};let n=1/3,i={displayTime:(t.split(" ").length*n+6+e.extraTime)*1e3,className:"uiMsg"};e.onClick&&(i.onClick=e.onClick),lu(t,i)}async function Nl(t,...e){let n="";e.length>0&&Array.isArray(e[0])&&(n=e.shift()),t=Ll(t,...e)+n,oe(t)}async function Ml(t,e=""){return new Promise(n=>{function r(){n(o.value),i.fadeOut(),setTimeout(()=>{i.remove()},2e3)}let i=document.createElement("div");i.style.opacity="0",i.classList.add("prompt"),i.innerHTML="<p>"+t+"<p><br />";let o=document.createElement("input");o.type="text",o.value=e,o.addEventListener("keydown",u=>{u.key=="Enter"&&r()}),i.appendChild(o),setTimeout(()=>{o.focus()},100),i.appendChild(document.createElement("br"));let s=document.createElement("button");s.innerHTML="OK",i.appendChild(s),s.addEventListener("click",r),_r.appendChild(i),i.fadeIn()})}async function Ol(t,e="OK",n="Cancel"){return new Promise(r=>{function i(d){return()=>{r(d),o.fadeOut(),setTimeout(()=>{o.remove()},2e3)}}let o=document.createElement("div");o.style.opacity="0",o.classList.add("prompt"),o.innerHTML="<p>"+t+"<p><br />";let s=document.createElement("div");s.style.display="flex",s.style.justifyContent="space-evenly";let u=document.createElement("button");u.innerHTML=n||"Cancel",u.addEventListener("click",i(!1)),s.appendChild(u);let c=document.createElement("button");c.innerHTML=e||"OK",c.addEventListener("click",i(!0)),s.appendChild(c);function l(d){d.key=="Enter"?i(!0)():d.key=="Escape"&&i(!1)(),document.removeEventListener("keydown",l)}document.addEventListener("keydown",l),setTimeout(()=>{c.focus()},100),o.appendChild(s),_r.appendChild(o),o.fadeIn()})}async function Vl(t,e,n=[],r=[]){return new Promise(i=>{function o(){i(u.value),s.fadeOut(),setTimeout(()=>{s.remove()},2e3)}let s=document.createElement("div");s.style.opacity="0",s.classList.add("prompt"),s.innerHTML="<p>"+t+"<p><br />";let u=document.createElement("select");for(let l=0;l<r.length;l++){let d=r[l],h=document.createElement("optgroup");h.label=d.name;for(let p=0;p<d.options.length;p++){let D=document.createElement("option");D.value=d.options[p]||d.options[p],D.innerHTML=d.options[p],h.appendChild(D)}u.appendChild(h)}for(let l=0;l<e.length;l++){let d=document.createElement("option");d.value=n[l]||e[l],d.innerHTML=e[l],u.appendChild(d)}u.querySelector("option").selected=!0,s.appendChild(u),s.appendChild(document.createElement("br"));let c=document.createElement("button");c.innerHTML="OK",s.appendChild(c),c.addEventListener("click",o),_r.appendChild(s),s.fadeIn()})}async function $l(t,e="datetime-local",n,r){return new Promise(i=>{function o(){i(u.value),s.fadeOut(),setTimeout(()=>{s.remove()},2e3)}let s=document.createElement("div");s.style.opacity="0",s.classList.add("prompt"),s.innerHTML="<p>"+t+"<p><br />";let u=document.createElement("input");u.type=e,u.value="00:00",n&&(u.min=new Date(n).toISOString()),r&&(u.max=new Date(r).toISOString()),u.addEventListener("keydown",l=>{l.key=="Enter"&&o()}),s.appendChild(u),setTimeout(()=>{u.focus()},100),s.appendChild(document.createElement("br"));let c=document.createElement("button");c.innerHTML="OK",s.appendChild(c),c.addEventListener("click",o),_r.appendChild(s),s.fadeIn()})}window.FD={uiMessage:lu,uiMsg:oe,uiMsgT:Nl,confirm:Ol,prompt:Ml,selectPrompt:Vl,promptTime:$l};var uo=nc(du(),1);var Rl=qs("#panels-container");function ve(t,e,n){let r=document.createElement("div");return r.classList.add("panel"),n.height&&(r.style.height=`${n.height}px`),n.width&&(r.style.width=`${n.width}px`),n.top&&(r.style.top=`${n.top}px`),n.left&&(r.style.left=`${n.left}px`),n.minHeight&&(r.dataset.h=`${n.minHeight}`),n.minWidth&&(r.dataset.w=`${n.minWidth}`),r.innerHTML=`
        <div class="panel-header">
            <span>${t}</span>
            <div class="panel-controls">
                <button class="panel-toggle-btn">-</button>
            </div>
        </div>
        <div class="panel-content">
            ${e}
        </div>
    `,Rl.appendChild(r),r}var so=ve("Editor",`<textarea id="editor-textarea"></textarea>
    <div>
        <button id="save" class="btn">Save</button>
        <button id="hard-save" class="btn">Hard Save</button>
    </div>`,{height:300,width:400,left:700,top:550,minHeight:200,minWidth:250}),Tr=so.qs("#editor-textarea");so.qs("#save").addEventListener("click",()=>Bn());so.qs("#hard-save").addEventListener("click",()=>{Bn(),j.emit("hard-save"),oe("Saved to database")});Tr.addEventListener("keydown",t=>{(t.ctrlKey||t.shiftKey)&&t.key==="Enter"&&(t.preventDefault(),Bn())});function Bn(){try{let t=uo.default.parse(Tr.value);X.set("data",t),oe("Saved",{extraTime:-2})}catch(t){console.error(t),oe("Invalid JSON5")}}function ke(t){let e=X.get("data")??{},n=JSON.parse(JSON.stringify(e));t(n),X.set("data",n)}function _n(){let t=X.get("data");Tr.value=uo.default.stringify(t??{},null,2)}gt.utils={render:_n,save:Bn};var ao=ve("Scene Manager",`
    <div class="scene-manager-content">
        <ul id="scene-list"></ul>
        <div class="scene-manager-controls">
            <input type="text" id="new-scene-name" placeholder="New scene name..." />
            <button id="create-scene-btn" class="btn">Create</button>
        </div>
    </div>
    `,{height:300,width:300,left:1120,top:550,minHeight:200,minWidth:200}),co=ao.querySelector("#scene-list"),hu=ao.querySelector("#new-scene-name"),jl=ao.querySelector("#create-scene-btn");function Ir(){return new URL(window.location.href).searchParams.get("scene")||"master"}function lo(){j.emit("scenes:list",t=>{if(t.err){oe("Error loading scenes: "+t.msg);return}co.innerHTML="";let e=t.data,n=Ir();e.forEach(r=>{let i=document.createElement("li");i.innerHTML=`
                <span>${r} ${r===n?"(current)":""}</span>
                <div class="scene-item-controls">
                    <button class="btn go-btn" data-scene-id="${r}">Go</button>
                    <button class="btn delete-btn" data-scene-id="${r}" ${r==="data"?"disabled":""}>Delete</button>
                </div>
            `,co.appendChild(i)})})}co.addEventListener("click",t=>{let e=t.target;if(e.classList.contains("go-btn")){let n=e.dataset.sceneId;if(n===Ir())return;window.location.search=`?scene=${n}`}if(e.classList.contains("delete-btn")){let n=e.dataset.sceneId;confirm(`Are you sure you want to delete scene "${n}"?`)&&j.emit("scenes:delete",n,r=>{r.err?oe("Error deleting scene: "+r.msg):(oe(`Scene "${n}" deleted.`),lo())})}});jl.addEventListener("click",()=>{let t=hu.value.trim();t&&j.emit("scenes:create",t,e=>{e.err?oe("Error creating scene: "+e.msg):(oe(`Scene "${t}" created.`),hu.value="",lo())})});j.on("connect",()=>{lo()});We.on("update",t=>{j.emit("y-update",Array.from(t))});j.on("y-update",t=>{Yi(We,new Uint8Array(t))});j.on("connect",()=>{j.emit("set-doc",Ir());let t=Xi(We);j.emit("y-sync",Array.from(t))});j.on("y-sync",t=>{let e=new Uint8Array(t);Yi(We,e);let n=Xi(We);j.emit("y-update",Array.from(n))});X.observeDeep(_n);var Ve=new xt;function fu(t){t.eventEmitter.on("run-scene",e=>{t.lastIndex.set(e),Hl(t,t.sceneConfig[e],e)})}async function Hl(t,e,n){if(!e)return console.error("No action",n,t);if(e.noWaitForEnd?Ve.emit(e.type,()=>{},e,t,n):await new Promise(r=>{Ve.emit(e.type,r,e,t,n)}),n===t.sceneConfig.length-1)return t.eventEmitter.emit("scenes-end");if(t.pause.get())return t.eventEmitter.emit("pause",n);t.eventEmitter.emit("run-scene",n+1)}Ve.on("text",async(t,e,n)=>{n.dialogEngine.writeAndConfirm(e.text).then(t)});Ve.on("dialog-choice",async(t,e,n,r)=>{n.showChoices(e.choices).then(i=>{Ve.emit("go-to-scene",()=>{},{type:"go-to-scene",scene:i.scene},n,-r),t()}),e.text&&n.dialogEngine.write(e.text)});Ve.on("background",async(t,e,n)=>{n.setBackground(e.url),t()});Ve.on("delay",async(t,e)=>{setTimeout(t,e.ms)});var Ur=class{constructor(e,n,r=25){this.element=e;this.pause=n;this.speed=r}_writing=0;async _writeText(e){this.element.innerHTML="";let n=Date.now();this._writing=n;for(let r of e){if(this._writing!==n)return;this.element.innerHTML+=r,await Dt(this.speed)}}async write(e){await this._writeText(e),await Dt(2500)}async writeAndConfirm(e){return await this._writeText(e),new Promise(n=>{let r=()=>{window.removeEventListener("click",i),document.removeEventListener("keydown",o)},i=s=>{if(this.pause.get())return;let u=s.target;(u.closest("#dialog-box")||u.id==="background")&&(r(),n())},o=s=>{this.pause.get()||(s.code==="Space"||s.code==="Enter")&&(r(),n())};window.addEventListener("click",i),document.addEventListener("keydown",o)})}};var Tn=class{value;parent;listeners=[];isStore=!1;constructor(e,n){this.value=e,this.parent=n}get(){return this.value}set(e,n=0){return this.value=e,this.notify(n),this}notify(e=0){return this.listeners.forEach(n=>n(this.value)),e>0&&this.parent&&typeof this.parent.notify=="function"&&this.parent.notify(e-1),this}subscribe(e){return this.listeners.push(e),this}};function pu(t,e,n=!1){n&&e.set(t.checked),t.addEventListener("change",()=>{e.set(t.checked)}),e.subscribe(r=>{t.checked!==r&&(t.checked=r)})}var Lh=window?.VQLClient?.fetchVQL;globalThis.lo=console.log;var Lr=class{element;background;dialogEngine;eventEmitter=new xt;choicesContainer;sceneConfig=[];lastIndex=new Tn(-1);pause=new Tn(!0);constructor(e){this.element=e,this.background=e.qs("#background"),this.dialogEngine=new Ur(e.qs("#dialog-box"),this.pause),this.choicesContainer=e.qs("#choices-container"),fu(this)}setBackground(e){this.background.src=e}showChoices(e){return this.choicesContainer.innerHTML="",new Promise(n=>{for(let r of e){let i=document.createElement("button");i.textContent=r.text,i.onclick=()=>{this.choicesContainer.innerHTML="",n(r)},this.choicesContainer.appendChild(i)}})}nextStep(){this.eventEmitter.emit("run-scene",this.lastIndex.get()+1)}};var Jl=ve("Game preview",`<div id="game-scene">
        <img id="background" alt="background">
        <div id="choices-container"></div>
        <div id="dialog-box"></div>
    </div>`,{width:640,height:500,top:20,left:20,minWidth:480,minHeight:300}),fe=new Lr(Jl.qs("#game-scene"));gt.mainScene=fe;Ve.on("go-to-scene",async(t,e)=>{oe("Go to scene: "+e.scene),t()});var Nr=ve("Game controller",`<div>
        <button class="btn" data-id="next-step">Next step</button>
        <button class="btn" data-id="reset-step">Reset</button>
        <br>
        <br>
        <label>
            Scene index:
            <input data-id="scene-index" type="number" value="-1">
        </label>
        <br>
        <label>
            Pause:
            <input data-id="pause" type="checkbox" checked>
        </label>
    </div>`,{height:300,width:640,left:20,top:550,minHeight:100,minWidth:200});Nr.qs("next-step",1).addEventListener("click",()=>{fe.nextStep()});Nr.qs("reset-step",1).addEventListener("click",()=>{fe.background.src="",fe.dialogEngine.element.innerHTML="",fe.eventEmitter.emit("run-scene",0)});var ho=Nr.qi("scene-index",1);ho.addEventListener("input",()=>{fe.eventEmitter.emit("run-scene",ho.valueAsNumber)});fe.lastIndex.subscribe(t=>{ho.valueAsNumber=t});pu(Nr.qi("pause",1),fe.pause);fe.pause.set(!0);fe.lastIndex.set(-1);var Wl=ve("Graphical Editor","",{width:660,height:500,top:20,left:700,minHeight:300,minWidth:480}),gu=Wl.qs(".panel-content");function mu(){let t=X.get("data");gu.innerHTML="";let e=document.createElement("div");e.className="graphical-editor-container",t&&t.sceneConfig&&t.sceneConfig.forEach((r,i)=>{e.appendChild(Kl(r,i))});let n=document.createElement("button");n.textContent="Add Action",n.className="add-action-btn",n.addEventListener("click",()=>{ke(r=>{r.sceneConfig||(r.sceneConfig=[]),r.sceneConfig.push({type:"text",text:"New action"})})}),e.appendChild(n),gu.appendChild(e)}function Kl(t,e){let n=document.createElement("div");n.className="action-node";let r=document.createElement("div");r.className="node-header";let i=document.createElement("span");i.className="node-title",i.textContent=`${e}: ${t.name||t.type}`,r.appendChild(i);let o=document.createElement("div");o.className="node-controls";let s=document.createElement("button");s.textContent="Up",s.className="node-btn",s.disabled=e===0,s.addEventListener("click",()=>{ke(h=>{let[p]=h.sceneConfig.splice(e,1);h.sceneConfig.splice(e-1,0,p)})}),o.appendChild(s);let u=document.createElement("button");u.textContent="Down",u.className="node-btn",u.addEventListener("click",()=>{ke(h=>{let[p]=h.sceneConfig.splice(e,1);h.sceneConfig.splice(e+1,0,p)})}),o.appendChild(u),X.doc.transact(()=>{let h=X.get("data");h&&h.sceneConfig&&(u.disabled=e===h.sceneConfig.length-1)});let c=document.createElement("button");c.textContent="Delete",c.className="node-btn delete-btn",c.addEventListener("click",()=>{ke(h=>{h.sceneConfig.splice(e,1)})}),o.appendChild(c),r.appendChild(o);let l=document.createElement("div");l.className="node-content";function d(h){ke(p=>{let D=p.sceneConfig[e],m;switch(h){case"text":m={type:"text",text:""};break;case"background":m={type:"background",url:""};break;case"delay":m={type:"delay",ms:1e3};break;case"go-to-scene":m={type:"go-to-scene",scene:""};break;case"dialog-choice":m={type:"dialog-choice",text:"",choices:[]};break;default:throw new Error(`Unknown action type: ${h}`)}Object.assign(D,{name:D.name,noWaitForEnd:D.noWaitForEnd}),p.sceneConfig[e]=m})}switch(l.appendChild(Yl("type",t.type,["text","background","delay","go-to-scene","dialog-choice"],d)),l.appendChild(Ct("name",t.name,h=>Et(e,"name",h))),l.appendChild(Ql("noWaitForEnd",t.noWaitForEnd,h=>Et(e,"noWaitForEnd",h?!0:void 0))),t.type){case"text":l.appendChild(Ct("text",t.text,m=>Et(e,"text",m)));break;case"background":l.appendChild(Ct("url",t.url,m=>Et(e,"url",m)));break;case"delay":l.appendChild(Xl("ms",t.ms,m=>Et(e,"ms",m)));break;case"go-to-scene":l.appendChild(Ct("scene",t.scene,m=>Et(e,"scene",m)));break;case"dialog-choice":l.appendChild(Ct("text",t.text,m=>Et(e,"text",m)));let h=document.createElement("div");h.className="choices-container",t.choices.forEach((m,w)=>{let Q=document.createElement("div");Q.className="choice-container";let pe=document.createElement("div");pe.className="choice-fields",pe.appendChild(Ct("text",m.text,$e=>Du(e,w,"text",$e))),pe.appendChild(Ct("scene",m.scene,$e=>Du(e,w,"scene",$e))),Q.appendChild(pe);let yt=document.createElement("button");yt.textContent="Delete",yt.className="node-btn delete-btn",yt.addEventListener("click",()=>{ke($e=>{$e.sceneConfig[e].choices.splice(w,1)})}),Q.appendChild(yt),h.appendChild(Q)});let p=document.createElement("button");p.textContent="Add Choice",p.className="add-choice-btn",p.addEventListener("click",()=>{ke(m=>{m.sceneConfig[e].choices.push({text:"",scene:""})})}),h.appendChild(p),l.appendChild(h);break;default:let D=t;throw new Error(`Unknown action type: ${D}`)}return n.appendChild(r),n.appendChild(l),n}function Mr(t,e){let n=document.createElement("div");n.className="field";let r=document.createElement("label");return r.textContent=t,n.appendChild(r),n.appendChild(e),n}function Yl(t,e,n,r){let i=document.createElement("select");return n.forEach(o=>{let s=document.createElement("option");s.value=o,s.textContent=o,o===e&&(s.selected=!0),i.appendChild(s)}),i.addEventListener("change",o=>r(o.target.value)),Mr(t,i)}function Ct(t,e,n){let r=document.createElement("input");return r.type="text",r.value=e||"",r.addEventListener("change",i=>n(i.target.value)),Mr(t,r)}function Xl(t,e,n){let r=document.createElement("input");return r.type="number",r.value=String(e||0),r.addEventListener("change",i=>n(Number(i.target.value))),Mr(t,r)}function Ql(t,e,n){let r=document.createElement("input");return r.type="checkbox",r.checked=e||!1,r.addEventListener("change",i=>n(i.target.checked)),Mr(t,r)}function Et(t,e,n){ke(r=>{r.sceneConfig[t][e]=n})}function Du(t,e,n,r){ke(i=>{let o=i.sceneConfig[t];o.choices[e][n]=r})}mu();X.observeDeep(mu);Ao();_n();X.observeDeep(()=>{let t=X.get("data");fe.sceneConfig=t?.sceneConfig??[]});
//# sourceMappingURL=index.js.map
